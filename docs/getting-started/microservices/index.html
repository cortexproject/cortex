<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Microservices Mode | Cortex</title><meta name=description content="This guide will help you run Cortex in microservices mode using Kubernetes (Kind). In this mode, each Cortex component runs as an independent service, …"><meta property="og:title" content="Microservices Mode"><meta property="og:description" content="This guide will help you run Cortex in microservices mode using Kubernetes (Kind). In this mode, each Cortex component runs as an independent service, mirroring how Cortex runs in production.
Time to complete: ~30 minutes
What You&rsquo;ll Learn How to deploy Cortex on Kubernetes with Helm How Cortex microservices communicate with each other How to configure Prometheus to send metrics to a distributed Cortex How to query metrics across multiple Cortex services How to configure rules and alerts in a distributed setup Prerequisites Software Requirements Kind (Kubernetes in Docker) kubectl (v1."><meta property="og:type" content="article"><meta property="og:url" content="/docs/getting-started/microservices/"><meta property="og:image" content="/images/logo-twitter-card.jpg"><meta property="article:section" content="docs"><meta property="og:site_name" content="Cortex"><meta itemprop=name content="Microservices Mode"><meta itemprop=description content="This guide will help you run Cortex in microservices mode using Kubernetes (Kind). In this mode, each Cortex component runs as an independent service, mirroring how Cortex runs in production.
Time to complete: ~30 minutes
What You&rsquo;ll Learn How to deploy Cortex on Kubernetes with Helm How Cortex microservices communicate with each other How to configure Prometheus to send metrics to a distributed Cortex How to query metrics across multiple Cortex services How to configure rules and alerts in a distributed setup Prerequisites Software Requirements Kind (Kubernetes in Docker) kubectl (v1."><meta itemprop=wordCount content="2038"><meta itemprop=image content="/images/logo-twitter-card.jpg"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/logo-twitter-card.jpg"><meta name=twitter:title content="Microservices Mode"><meta name=twitter:description content="This guide will help you run Cortex in microservices mode using Kubernetes (Kind). In this mode, each Cortex component runs as an independent service, mirroring how Cortex runs in production.
Time to complete: ~30 minutes
What You&rsquo;ll Learn How to deploy Cortex on Kubernetes with Helm How Cortex microservices communicate with each other How to configure Prometheus to send metrics to a distributed Cortex How to query metrics across multiple Cortex services How to configure rules and alerts in a distributed setup Prerequisites Software Requirements Kind (Kubernetes in Docker) kubectl (v1."><link rel=preload href=/scss/main.min.5eaade7cd2a503d4fabeefa845c4a82ed6faa89fe4c763572d9fbdd72b72312d.css as=style><link href=/scss/main.min.5eaade7cd2a503d4fabeefa845c4a82ed6faa89fe4c763572d9fbdd72b72312d.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SRR0DSREGX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SRR0DSREGX",{anonymize_ip:!1})}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar navbar-nocover"><a id=cortex-logo class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="-17.92 -14.92 1191.84 462.84"><defs><style>.cls-1{fill:#fff}</style></defs><path d="M214.531 8.017C99.353 8.017 5.65 101.72 5.65 216.899S99.353 425.78 214.531 425.78s208.882-93.704 208.882-208.882S329.71 8.017 214.531 8.017zm0 408.558c-110.102.0-199.676-89.574-199.676-199.676S104.429 17.222 214.53 17.222 414.208 106.797 414.208 216.9 324.633 416.575 214.53 416.575z" class="cls-1"/><circle cx="327.452" cy="221.633" r="34.571" class="cls-1"/><circle cx="213.713" cy="353.584" r="34.571" class="cls-1"/><path d="M299.992 167.913l-59-56.05a34.578 34.578.0 10-4.343 4.34l57.828 54.937a60.158 60.158.0 00-27.168 49.123h-12.97l-23.456-67.02-26.055 64.718H175.73l-24.724 57.22-21.808-54.524-.063.025v-.586h-22.048a34.582 34.582.0 10-.275 6.138h18.005l25.97 64.925 28.977-67.06h29.207l21.51-53.424 19.503 55.725H267.5a60.173 60.173.0 0025.202 44.11l-56.52 56.52 4.34 4.338 57.492-57.492a60.155 60.155.0 101.977-105.963zm81.481 53.515a54.02 54.02.0 11-54.022-54.02 54.083 54.083.0 0154.022 54.02zm175.707 42.568q-8.797 8.178-24.405 8.177a34.858 34.858.0 01-17.095-3.965 33.188 33.188.0 01-11.643-10.529 46.374 46.374.0 01-6.566-14.99 71.134 71.134.0 01-2.105-17.341 86.99 86.99.0 011.982-18.706 46.804 46.804.0 016.565-15.98 34.028 34.028.0 0112.263-11.149q7.675-4.21 19.077-4.212 13.38.0 21.306 6.69 7.927 6.689 10.405 18.829h21.803a50.76 50.76.0 00-5.946-19.696 44.06 44.06.0 00-12.015-13.75 49.842 49.842.0 00-16.848-8.051 77.44 77.44.0 00-20.44-2.601q-15.114.0-26.509 5.326a52.935 52.935.0 00-18.952 14.617 62.165 62.165.0 00-11.273 21.8 94.013 94.013.0 00-3.717 26.883 86.195 86.195.0 003.84 26.386 57.783 57.783.0 0011.397 20.686 50.138 50.138.0 0018.829 13.38 66.766 66.766.0 0025.891 4.705q24.527.0 38.772-12.882 14.245-12.878 17.715-36.668h-21.556q-1.986 14.867-10.776 23.041zm157.44-87.828a56.338 56.338.0 00-19.447-14.244q-11.52-5.203-26.882-5.203-15.115.0-26.756 5.203a56.009 56.009.0 00-19.573 14.244 59.75 59.75.0 00-11.892 21.307 85.299 85.299.0 00-3.965 26.386 84.117 84.117.0 003.965 26.262 59.853 59.853.0 0011.892 21.183 54.61 54.61.0 0019.573 14.12q11.643 5.077 26.756 5.08 15.36.0 26.882-5.08a54.908 54.908.0 0019.447-14.12 59.95 59.95.0 0011.892-21.183 84.181 84.181.0 003.965-26.262 85.364 85.364.0 00-3.965-26.386 59.846 59.846.0 00-11.892-21.307zm-9.538 68.38a43.305 43.305.0 01-8.548 15.113 37.061 37.061.0 01-12.759 9.29 38.825 38.825.0 01-30.968.0 37.003 37.003.0 01-12.76-9.29 43.209 43.209.0 01-8.547-15.114 70.669 70.669.0 010-41.373 44.634 44.634.0 018.547-15.237 36.428 36.428.0 0112.76-9.415 38.826 38.826.0 0130.968.0 36.484 36.484.0 0112.76 9.415 44.735 44.735.0 018.547 15.237 70.624 70.624.0 010 41.373zm81.141-80.89q-11.147 7.434-18.83 23.041h-.493v-27.005h-19.82V287.78h21.057v-56.984a87.528 87.528.0 012.478-21.924 41.993 41.993.0 017.93-16.228 33.951 33.951.0 0114.368-10.158q8.919-3.468 21.555-3.468V156.72q-17.097-.493-28.245 6.937zm80.761-42.366h-21.06v38.402h-21.8v18.581h21.8v81.51a48.668 48.668.0 001.734 14.37 17.432 17.432.0 005.326 8.423 20.57 20.57.0 009.415 4.088 75.59 75.59.0 0013.999 1.115h16.104v-18.582h-9.664a70.335 70.335.0 01-8.05-.37 10.361 10.361.0 01-4.833-1.611 6.108 6.108.0 01-2.354-3.469 23.006 23.006.0 01-.617-5.946v-79.528h25.518v-18.581h-25.518zm148.522 60.452a56.135 56.135.0 00-18.085-17.962q-11.276-7.063-28.367-7.06a58.263 58.263.0 00-24.155 4.953A56.796 56.796.0 00925.82 175.55a63.949 63.949.0 00-12.51 21.058 77.064 77.064.0 00-4.461 26.758 102.521 102.521.0 004.338 27.004 58.87 58.87.0 0011.519 21.307 52.43 52.43.0 0018.953 13.873q11.272 4.954 26.632 4.955 21.8.0 36.173-10.901 14.364-10.898 18.58-32.455h-20.81q-2.73 12.635-11.272 18.829-8.549 6.198-21.927 6.195a43.577 43.577.0 01-18.085-3.468 35.417 35.417.0 01-12.636-9.291 36.127 36.127.0 01-7.184-13.38 50.746 50.746.0 01-1.981-15.98h95.879a102.07 102.07.0 00-2.107-24.526 71.064 71.064.0 00-9.415-23.784zm-84.357 29.73a43.81 43.81.0 013.219-13.999 37.354 37.354.0 017.433-11.52 34.013 34.013.0 0111.272-7.803 36.694 36.694.0 0114.74-2.85 36.062 36.062.0 0114.494 2.85 36.492 36.492.0 0111.398 7.68 36.107 36.107.0 017.68 11.52 43.253 43.253.0 013.345 14.122zm170.95 7.184 44.1-58.964h-25.271l-31.961 44.843-30.721-44.843h-27.006l44.595 60.698-48.063 67.389h25.518l35.677-53.019 35.676 53.019h27.006l-49.55-69.123z" class="cls-1"/></svg></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://twitter.com/cortexmetrics class="nav-link active"><span class=active><i class="fab fa-fw fa-twitter"></i> Twitter</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://github.com/cortexproject class="nav-link active"><span class=active><i class="fab fa-fw fa-github"></i> GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-md-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.71d740ca1fb7dcd2ac42f586adef3fe9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.71d740ca1fb7dcd2ac42f586adef3fe9.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsgetting-started-li><a href=/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedsingle-binary-li><a href=/docs/getting-started/single-binary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedsingle-binary><span>Single Binary Mode</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsgetting-startedmicroservices-li><a href=/docs/getting-started/microservices/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedmicroservices><span class=td-sidebar-nav-active-item>Microservices Mode</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsarchitecture-li><a href=/docs/architecture/ title="Cortex Architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsarchitecture><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsblocks-storage-li><a href=/docs/blocks-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsblocks-storage><span>Blocks Storage</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagequerier-li><a href=/docs/blocks-storage/querier/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagequerier><span>Querier</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagestore-gateway-li><a href=/docs/blocks-storage/store-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagestore-gateway><span>Store-gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagecompactor-li><a href=/docs/blocks-storage/compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagecompactor><span>Compactor</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storageproduction-tips-li><a href=/docs/blocks-storage/production-tips/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageproduction-tips><span>Production tips</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagebinary-index-header-li><a href=/docs/blocks-storage/binary-index-header/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebinary-index-header><span>Binary index-header</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagebucket-index-li><a href=/docs/blocks-storage/bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebucket-index><span>Bucket Index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks-li><a href=/docs/blocks-storage/migrate-cortex-cluster-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks><span>Migrate Cortex cluster from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks-li><a href=/docs/blocks-storage/convert-long-term-storage-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks><span>Convert long-term storage from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus-li><a href=/docs/blocks-storage/migrate-storage-from-thanos-and-prometheus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus><span>Migrate the storage from Thanos and Prometheus</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagelearn-more-li><a href=/docs/blocks-storage/learn-more/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagelearn-more><span>Learn more</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconfiguration-li><a href=/docs/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsconfiguration><span>Configuration</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationconfiguration-file-li><a href=/docs/configuration/configuration-file/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationconfiguration-file><span>Configuration file</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationarguments-li><a href=/docs/configuration/arguments/ title="Cortex Arguments" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationarguments><span>Cortex Arguments Explained</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationprometheus-frontend-li><a href=/docs/configuration/prometheus-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationprometheus-frontend><span>Prometheus Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationv1guarantees-li><a href=/docs/configuration/v1guarantees/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationv1guarantees><span>v1.x Guarantees</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguides-li><a href=/docs/guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsguides><span>Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrunning-cortex-on-kubernetes-li><a href=/docs/guides/running-cortex-on-kubernetes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrunning-cortex-on-kubernetes><span>Running Cortex on Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesgetting-started-with-gossiped-ring-li><a href=/docs/guides/getting-started-with-gossiped-ring/ title="Getting started with gossiped ring" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesgetting-started-with-gossiped-ring><span>Getting started with a gossip ring cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesalertmanager-configuration-li><a href=/docs/guides/alertmanager-configuration/ title="Configuring Notification using Cortex Alertmanager" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesalertmanager-configuration><span>Alertmanager configuration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesauth-li><a href=/docs/guides/auth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesauth><span>Authentication and Authorisation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidescapacity-planning-li><a href=/docs/guides/capacity-planning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidescapacity-planning><span>Capacity Planning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesruler-sharding-li><a href=/docs/guides/ruler-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesruler-sharding><span>Config for horizontally scaling the Ruler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesha-pair-handling-li><a href=/docs/guides/ha-pair-handling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesha-pair-handling><span>Config for sending HA Pairs data to Cortex</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesencryption-at-rest-li><a href=/docs/guides/encryption-at-rest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesencryption-at-rest><span>Encryption at Rest</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-rolling-updates-li><a href=/docs/guides/ingesters-rolling-updates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-rolling-updates><span>Ingesters rolling updates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-scaling-up-and-down-li><a href=/docs/guides/ingesters-scaling-up-and-down/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-scaling-up-and-down><span>Ingesters scaling up and down</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesnative-histograms-li><a href=/docs/guides/native-histograms/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesnative-histograms><span>Native Histograms</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesoverrides-exporter-li><a href=/docs/guides/overrides-exporter/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesoverrides-exporter><span>Overrides Exporter</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidespartition-compaction-li><a href=/docs/guides/partition-compaction/ title="Use Partition Compaction in Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidespartition-compaction><span>Partition Compaction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrule-evalutions-via-query-frontend-li><a href=/docs/guides/rule-evalutions-via-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrule-evalutions-via-query-frontend><span>Rule evaluations via query frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestls-li><a href=/docs/guides/tls/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestls><span>Securing communication between Cortex components with TLS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidessecurity-li><a href=/docs/guides/security/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidessecurity><span>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesshuffle-sharding-li><a href=/docs/guides/shuffle-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesshuffle-sharding><span>Shuffle Sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestracing-li><a href=/docs/guides/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestracing><span>Tracing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesuse-opentelemetry-collector-to-send-metrics-to-cortex-li><a href=/docs/guides/use-opentelemetry-collector-to-send-metrics-to-cortex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesuse-opentelemetry-collector-to-send-metrics-to-cortex><span>Use OpenTelemetry Collector to send metrics to Cortex</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguideszone-aware-replication-li><a href=/docs/guides/zone-aware-replication/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguideszone-aware-replication><span>Zone Aware Replication</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesparquet-mode-li><a href=/docs/guides/parquet-mode/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesparquet-mode><span>Parquet Mode</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesprotecting-cortex-from-heavy-queries-li><a href=/docs/guides/protecting-cortex-from-heavy-queries/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesprotecting-cortex-from-heavy-queries><span>Protecting Cortex from Heavy Queries</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestenant-id-naming-conventions-li><a href=/docs/guides/tenant-id-naming-conventions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestenant-id-naming-conventions><span>Tenant ID Naming Conventions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesglossary-li><a href=/docs/guides/glossary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesglossary><span>Glossary</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-li><a href=/docs/api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi><span>HTTP API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><a href=/docs/operations/ title="Operating Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-auditor-li><a href=/docs/operations/query-auditor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-auditor><span>Query Auditor (tool)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-tee-li><a href=/docs/operations/query-tee/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-tee><span>Query Tee (service)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsrequests-mirroring-to-secondary-cluster-li><a href=/docs/operations/requests-mirroring-to-secondary-cluster/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsrequests-mirroring-to-secondary-cluster><span>Requests mirroring to secondary cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsscaling-query-frontend-li><a href=/docs/operations/scaling-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsscaling-query-frontend><span>Scaling the Query Frontend</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscase-studies-li><a href=/docs/case-studies/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscase-studies><span>Case Studies</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesgojek-li><a href=/docs/case-studies/gojek/ title="How Gojek Is Leveraging Cortex to Keep Up with Its Ever-Growing Scale" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesgojek><span>Gojek</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesrewe-digital-li><a href=/docs/case-studies/rewe-digital/ title="How Cortex helped REWE digital ensure stability while scaling services during the Covid-19 pandemic" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesrewe-digital><span>REWE digital</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesbuoyant-cloud-li><a href=/docs/case-studies/buoyant-cloud/ title="Buoyant Cloud and Cortex: Standing on the shoulders of Linkerd and Prometheus" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesbuoyant-cloud><span>Buoyant Cloud</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsproposals-li><a href=/docs/proposals/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsproposals><span>Proposals</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsauth-gateway-li><a href=/docs/proposals/auth-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsauth-gateway><span>Authentication Gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-bucket-index-li><a href=/docs/proposals/blocks-storage-bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-bucket-index><span>Blocks storage bucket index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-sharding-li><a href=/docs/proposals/blocks-storage-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-sharding><span>Blocks storage sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalscross-tenant-query-federation-li><a href=/docs/proposals/cross-tenant-query-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalscross-tenant-query-federation><span>Cross-Tenant Query Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalscrossplane-provider-for-cortex-li><a href=/docs/proposals/crossplane-provider-for-cortex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalscrossplane-provider-for-cortex><span>Crossplane Provider for Cortex</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-deletion-li><a href=/docs/proposals/tenant-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-deletion><span>Deletion of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsdistributed-query-execution-li><a href=/docs/proposals/distributed-query-execution/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsdistributed-query-execution><span>Distributed Query Execution</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsdocumentation-versioning-li><a href=/docs/proposals/documentation-versioning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsdocumentation-versioning><span>Documentation Versioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsgeneralize-modules-li><a href=/docs/proposals/generalize-modules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsgeneralize-modules><span>Generalize Modules Service to make it extensible</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalshttp-api-design-li><a href=/docs/proposals/http-api-design/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalshttp-api-design><span>HTTP API Design</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsingesters-migration-li><a href=/docs/proposals/ingesters-migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsingesters-migration><span>Migrating ingesters from chunks to blocks and back.</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparallel-compaction-li><a href=/docs/proposals/parallel-compaction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparallel-compaction><span>Parallel Compaction by Time Interval</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparquet-storage-li><a href=/docs/proposals/parquet-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparquet-storage><span>Parquet-based Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalspartition-ring-multi-az-replication-li><a href=/docs/proposals/partition-ring-multi-az-replication/ title="Partition Ring with Multi-AZ Replication" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalspartition-ring-multi-az-replication><span>Partition Ring Multi-AZ Replication</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-retention-li><a href=/docs/proposals/tenant-retention/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-retention><span>Retention of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsring-multikey-li><a href=/docs/proposals/ring-multikey/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsring-multikey><span>Ring Multikey</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-ha-li><a href=/docs/proposals/ruler-ha/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-ha><span>Ruler HA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-high-availability-li><a href=/docs/proposals/ruler-high-availability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-high-availability><span>Ruler High Availability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-tenant-federation-li><a href=/docs/proposals/ruler-tenant-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-tenant-federation><span>Ruler Tenant Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-alertmanager-li><a href=/docs/proposals/scalable-alertmanager/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-alertmanager><span>Scalable Alertmanager</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-query-frontend-li><a href=/docs/proposals/scalable-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-query-frontend><span>Scalable Query Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-and-zone-awareness-li><a href=/docs/proposals/shuffle-sharding-and-zone-awareness/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-and-zone-awareness><span>Shuffle sharding and zone awareness</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-on-the-read-path-li><a href=/docs/proposals/shuffle-sharding-on-the-read-path/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-on-the-read-path><span>Shuffle sharding on the read path</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalssupport-metadata-api-li><a href=/docs/proposals/support-metadata-api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalssupport-metadata-api><span>Support metadata API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblock-storage-time-series-deletion-li><a href=/docs/proposals/block-storage-time-series-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblock-storage-time-series-deletion><span>Time Series Deletion from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstimeseries-partitioning-in-compactor-li><a href=/docs/proposals/timeseries-partitioning-in-compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstimeseries-partitioning-in-compactor><span>Timeseries Partitioning in Compactor</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsoverrides-api-li><a href=/docs/proposals/overrides-api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsoverrides-api><span>User Overrides API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributing-li><a href=/docs/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinggovernance-li><a href=/docs/contributing/governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinggovernance><span>Governance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributingdesign-patterns-and-code-conventions-li><a href=/docs/contributing/design-patterns-and-code-conventions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingdesign-patterns-and-code-conventions><span>Design patterns and Code conventions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-run-the-website-locally-li><a href=/docs/contributing/how-to-run-the-website-locally/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-run-the-website-locally><span>How to run the website locally</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-upgrade-golang-version-li><a href=/docs/contributing/how-to-upgrade-golang-version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-upgrade-golang-version><span>How to upgrade Golang version</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-integration-tests-work-li><a href=/docs/contributing/how-integration-tests-work/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-integration-tests-work><span>How integration tests work</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-update-the-build-image-li><a href=/docs/contributing/how-to-update-the-build-image/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-update-the-build-image><span>How to update the build image</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-add-a-maintainer-li><a href=/docs/contributing/how-to-add-a-maintainer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-add-a-maintainer><span>How to add a maintainer</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsroadmap-li><a href=/docs/roadmap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsroadmap><span>Roadmap</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docschangelog-li><a href=/docs/changelog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docschangelog><span>Changelog</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscode-of-conduct-li><a href=/docs/code-of-conduct/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscode-of-conduct><span>Code of Conduct</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cortexproject/cortex/edit/master/docs/getting-started/microservices.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cortexproject/cortex/issues/new?title=Microservices%20Mode" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cortexproject/cortex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#what-youll-learn>What You&rsquo;ll Learn</a></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#software-requirements>Software Requirements</a></li><li><a href=#system-requirements>System Requirements</a></li><li><a href=#optional-tools>Optional Tools</a></li></ul></li><li><a href=#architecture>Architecture</a></li><li><a href=#step-1-create-a-kubernetes-cluster>Step 1: Create a Kubernetes Cluster</a></li><li><a href=#step-2-configure-helm-repositories>Step 2: Configure Helm Repositories</a></li><li><a href=#step-3-clone-the-repository>Step 3: Clone the Repository</a></li><li><a href=#step-4-create-the-cortex-namespace>Step 4: Create the Cortex Namespace</a></li><li><a href=#step-5-deploy-seaweedfs-s3-compatible-storage>Step 5: Deploy SeaweedFS (S3-Compatible Storage)</a><ul><li><a href=#deploy-seaweedfs>Deploy SeaweedFS</a></li><li><a href=#wait-for-seaweedfs-to-be-ready>Wait for SeaweedFS to be Ready</a></li><li><a href=#create-s3-buckets>Create S3 Buckets</a></li></ul></li><li><a href=#step-6-deploy-cortex>Step 6: Deploy Cortex</a><ul><li><a href=#verify-cortex-components>Verify Cortex Components</a></li></ul></li><li><a href=#step-7-deploy-prometheus>Step 7: Deploy Prometheus</a></li><li><a href=#step-8-deploy-grafana>Step 8: Deploy Grafana</a><ul><li><a href=#load-cortex-dashboards>Load Cortex Dashboards</a></li></ul></li><li><a href=#step-9-access-the-services>Step 9: Access the Services</a></li><li><a href=#step-10-verify-data-flow>Step 10: Verify Data Flow</a><ul><li><a href=#check-prometheus-is-sending-metrics>Check Prometheus is Sending Metrics</a></li><li><a href=#query-metrics-in-cortex>Query Metrics in Cortex</a></li><li><a href=#view-metrics-in-grafana>View Metrics in Grafana</a></li><li><a href=#view-cortex-dashboards>View Cortex Dashboards</a></li></ul></li><li><a href=#step-11-configure-rules-and-alerts-optional>Step 11: Configure Rules and Alerts (Optional)</a><ul><li><a href=#port-forward-to-cortex-api>Port-Forward to Cortex API</a></li><li><a href=#install-cortextool-if-needed>Install cortextool (if needed)</a></li><li><a href=#load-recording-and-alerting-rules>Load Recording and Alerting Rules</a></li><li><a href=#verify-rules-are-loaded>Verify Rules Are Loaded</a></li></ul></li><li><a href=#step-12-configure-alertmanager-optional>Step 12: Configure Alertmanager (Optional)</a></li><li><a href=#explore-and-experiment>Explore and Experiment</a><ul><li><a href=#experiment-1-scale-ingesters>Experiment 1: Scale Ingesters</a></li><li><a href=#experiment-2-kill-an-ingester>Experiment 2: Kill an Ingester</a></li><li><a href=#experiment-3-view-component-logs>Experiment 3: View Component Logs</a></li><li><a href=#experiment-4-inspect-the-ring>Experiment 4: Inspect the Ring</a></li><li><a href=#experiment-5-check-block-storage>Experiment 5: Check Block Storage</a></li></ul></li><li><a href=#configuration-files>Configuration Files</a></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#pods-are-pending-or-crashing>Pods are pending or crashing</a></li><li><a href=#ingesters-wont-start>Ingesters won&rsquo;t start</a></li><li><a href=#no-metrics-in-grafana>No metrics in Grafana</a></li><li><a href=#port-forward-fails>Port-forward fails</a></li><li><a href=#out-of-memory>Out of memory</a></li><li><a href=#cortextool-commands-fail>cortextool commands fail</a></li></ul></li><li><a href=#clean-up>Clean Up</a><ul><li><a href=#remove-port-forwards>Remove Port-Forwards</a></li><li><a href=#delete-the-kind-cluster>Delete the Kind Cluster</a></li></ul></li><li><a href=#next-steps>Next Steps</a></li><li><a href=#comparison-single-binary-vs-microservices>Comparison: Single Binary vs Microservices</a></li><li><a href=#additional-resources>Additional Resources</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-projects"><h5 class=taxonomy-title>Our Projects</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/projects/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>6</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/blog/ data-taxonomy-term=blog><span class=taxonomy-label>blog</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=/tags/community/ data-taxonomy-term=community><span class=taxonomy-label>community</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=/tags/ingester/ data-taxonomy-term=ingester><span class=taxonomy-label>ingester</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/optimization/ data-taxonomy-term=optimization><span class=taxonomy-label>optimization</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=/tags/query/ data-taxonomy-term=query><span class=taxonomy-label>query</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=/tags/rejection/ data-taxonomy-term=rejection><span class=taxonomy-label>rejection</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/scaling/ data-taxonomy-term=scaling><span class=taxonomy-label>scaling</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/updates/ data-taxonomy-term=updates><span class=taxonomy-label>updates</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/getting-started/>Getting Started</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/getting-started/microservices/ aria-disabled=true class="btn-link disabled">Microservices Mode</a></li></ol></nav><div class=td-content><h1>Microservices Mode</h1><header class=article-meta></header><p>This guide will help you run Cortex in microservices mode using Kubernetes (Kind). In this mode, each Cortex component runs as an independent service, mirroring how Cortex runs in production.</p><p><strong>Time to complete:</strong> ~30 minutes</p><h2 id=what-youll-learn>What You&rsquo;ll Learn</h2><ul><li>How to deploy Cortex on Kubernetes with Helm</li><li>How Cortex microservices communicate with each other</li><li>How to configure Prometheus to send metrics to a distributed Cortex</li><li>How to query metrics across multiple Cortex services</li><li>How to configure rules and alerts in a distributed setup</li></ul><h2 id=prerequisites>Prerequisites</h2><h3 id=software-requirements>Software Requirements</h3><ul><li><a href=https://kind.sigs.k8s.io/docs/user/quick-start/#installation>Kind</a> (Kubernetes in Docker)</li><li><a href=https://kubernetes.io/docs/tasks/tools/>kubectl</a> (v1.20+)</li><li><a href=https://helm.sh/docs/intro/install/>Helm</a> (v3.0+)</li><li><a href=https://docs.docker.com/get-docker/>Docker</a> (required by Kind)</li></ul><h3 id=system-requirements>System Requirements</h3><ul><li>8GB RAM minimum (for local Kubernetes cluster)</li><li>20GB disk space</li><li>Linux, macOS, or Windows with WSL2</li></ul><h3 id=optional-tools>Optional Tools</h3><ul><li><a href=https://github.com/cortexproject/cortex-tools/>cortextool</a> - For managing rules and alerts</li><li><a href=https://jqlang.github.io/jq/>jq</a> - For parsing JSON responses</li></ul><h2 id=architecture>Architecture</h2><p>This setup creates a production-like Cortex deployment with independent microservices:</p><pre tabindex=0><code>                            ┌─────────────────────────────────────┐
                            │      Kubernetes Cluster (Kind)      │
                            │                                     │
┌─────────────┐             │  ┌──────────────┐  ┌──────────────┐ │
│ Prometheus  │────remote───┼─&gt;│ Distributor  │  │   Ingester   │ │
│             │    write    │  └──────────────┘  └──────────────┘ │
└─────────────┘             │          │                │         │
                            │          │                │         │
                            │          └────────────────┘         │
                            │                   │                 │
                            │                   ▼                 │
      ┌─────────────┐       │  ┌──────────────┐  ┌──────────────┐ │
      │   Grafana   │◄──────┼──┤   Querier    │  │  SeaweedFS   │ │
      └─────────────┘       │  └──────────────┘  │     (S3)     │ │
                            │          ▲         └──────────────┘ │
                            │          │                │         │
                            │  ┌──────────────┐         │         │
                            │  │Store Gateway │◄────────┘         │
                            │  └──────────────┘                   │
                            │                                     │
                            │  ┌──────────────┐                   │
                            │  │  Compactor   │                   │
                            │  └──────────────┘                   │
                            │                                     │
                            │  ┌──────────────┐                   │
                            │  │    Ruler     │                   │
                            │  └──────────────┘                   │
                            └─────────────────────────────────────┘
</code></pre><p><strong>Components:</strong></p><ul><li><strong>Distributor</strong>: Receives metrics from Prometheus, validates, and forwards to ingesters</li><li><strong>Ingester</strong>: Stores recent metrics in memory and flushes to S3</li><li><strong>Querier</strong>: Queries both ingesters (recent data) and store-gateway (historical data)</li><li><strong>Store Gateway</strong>: Queries historical blocks from S3</li><li><strong>Compactor</strong>: Compacts and deduplicates blocks in S3</li><li><strong>Ruler</strong>: Evaluates recording and alerting rules</li><li><strong>Alertmanager</strong>: Manages alerts (optional)</li></ul><h2 id=step-1-create-a-kubernetes-cluster>Step 1: Create a Kubernetes Cluster</h2><p>Create a local Kubernetes cluster using Kind:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kind create cluster --name cortex-demo
</span></span></code></pre></div><p><strong>What&rsquo;s happening?</strong></p><ul><li>Kind creates a Kubernetes cluster running inside Docker</li><li>This takes ~2 minutes</li><li>The cluster is named <code>cortex-demo</code></li></ul><p><strong>Verify the cluster:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl cluster-info
</span></span><span style=display:flex><span>kubectl get nodes
</span></span></code></pre></div><p>You should see one node in the <code>Ready</code> state.</p><h2 id=step-2-configure-helm-repositories>Step 2: Configure Helm Repositories</h2><p>Add the Helm repositories for Cortex, Grafana, and Prometheus:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm repo add cortex-helm https://cortexproject.github.io/cortex-helm-chart
</span></span><span style=display:flex><span>helm repo add grafana https://grafana.github.io/helm-charts
</span></span><span style=display:flex><span>helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
</span></span><span style=display:flex><span>helm repo update
</span></span></code></pre></div><h2 id=step-3-clone-the-repository>Step 3: Clone the Repository</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone https://github.com/cortexproject/cortex.git
</span></span><span style=display:flex><span>cd cortex/docs/getting-started
</span></span></code></pre></div><p>The <code>getting-started</code> directory contains Helm values files and Kubernetes manifests.</p><h2 id=step-4-create-the-cortex-namespace>Step 4: Create the Cortex Namespace</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl create namespace cortex
</span></span></code></pre></div><p>All Cortex components will be deployed in this namespace.</p><h2 id=step-5-deploy-seaweedfs-s3-compatible-storage>Step 5: Deploy SeaweedFS (S3-Compatible Storage)</h2><p>Cortex requires object storage for blocks. We&rsquo;ll use SeaweedFS as an S3-compatible alternative.</p><h3 id=deploy-seaweedfs>Deploy SeaweedFS</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex apply -f seaweedfs.yaml --wait --timeout<span style=color:#f92672>=</span>5m
</span></span></code></pre></div><h3 id=wait-for-seaweedfs-to-be-ready>Wait for SeaweedFS to be Ready</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex wait --for<span style=color:#f92672>=</span>condition<span style=color:#f92672>=</span>ready pod -l app<span style=color:#f92672>=</span>seaweedfs --timeout<span style=color:#f92672>=</span>5m
</span></span></code></pre></div><p><strong>What&rsquo;s happening?</strong></p><ul><li>SeaweedFS starts as a StatefulSet</li><li>It provides an S3-compatible API on port 8333</li><li>Initial startup takes ~1 minute</li></ul><h3 id=create-s3-buckets>Create S3 Buckets</h3><p>SeaweedFS needs buckets for Cortex data. First, port-forward to SeaweedFS:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward svc/seaweedfs <span style=color:#ae81ff>8333</span> &amp;
</span></span></code></pre></div><p><strong>Note:</strong> This runs in the background. If the command fails with &ldquo;port already in use&rdquo;, kill the existing process:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lsof -ti:8333 | xargs kill
</span></span></code></pre></div><p>Now create the buckets:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#66d9ef>for</span> bucket in cortex-blocks cortex-ruler cortex-alertmanager; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  curl --aws-sigv4 <span style=color:#e6db74>&#34;aws:amz:local:seaweedfs&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>       --user <span style=color:#e6db74>&#34;any:any&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>       -X PUT http://localhost:8333/$bucket
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p><strong>What are these buckets?</strong></p><ul><li><code>cortex-blocks</code>: Stores TSDB blocks (metric data)</li><li><code>cortex-ruler</code>: Stores ruler configuration</li><li><code>cortex-alertmanager</code>: Stores alertmanager configuration</li></ul><p><strong>Verify buckets were created:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl --aws-sigv4 <span style=color:#e6db74>&#34;aws:amz:local:seaweedfs&#34;</span> --user <span style=color:#e6db74>&#34;any:any&#34;</span> http://localhost:8333
</span></span></code></pre></div><h2 id=step-6-deploy-cortex>Step 6: Deploy Cortex</h2><p>Deploy Cortex using the Helm chart with the provided values file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm upgrade --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version<span style=color:#f92672>=</span>2.4.0 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --namespace cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  cortex cortex-helm/cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -f cortex-values.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --wait
</span></span></code></pre></div><p><strong>What&rsquo;s in <code>cortex-values.yaml</code>?</strong></p><ul><li>Configures blocks storage to use SeaweedFS</li><li>Sets resource limits for each component</li><li>Enables the ruler and alertmanager</li><li>Configures the ingester to use 3 replicas</li></ul><p><strong>This takes ~5 minutes.</strong> The <code>--wait</code> flag waits for all pods to be ready.</p><h3 id=verify-cortex-components>Verify Cortex Components</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex get pods
</span></span></code></pre></div><p>You should see pods for each Cortex component:</p><ul><li><code>cortex-distributor-*</code></li><li><code>cortex-ingester-*</code> (multiple replicas)</li><li><code>cortex-querier-*</code></li><li><code>cortex-query-frontend-*</code></li><li><code>cortex-store-gateway-*</code></li><li><code>cortex-compactor-*</code></li><li><code>cortex-ruler-*</code></li><li><code>cortex-nginx-*</code> (reverse proxy)</li></ul><p><strong>Check logs if pods aren&rsquo;t starting:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex logs -l app.kubernetes.io/name<span style=color:#f92672>=</span>cortex -f --max-log-requests <span style=color:#ae81ff>20</span>
</span></span></code></pre></div><h2 id=step-7-deploy-prometheus>Step 7: Deploy Prometheus</h2><p>Deploy Prometheus to scrape metrics from Kubernetes and send them to Cortex:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm upgrade --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version<span style=color:#f92672>=</span>25.20.1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --namespace cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  prometheus prometheus-community/prometheus <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -f prometheus-values.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --wait
</span></span></code></pre></div><p><strong>What&rsquo;s in <code>prometheus-values.yaml</code>?</strong></p><ul><li>Configures remote_write to send metrics to <code>cortex-distributor</code></li><li>Sets up scrape configs for Kubernetes services</li><li>Adds the <code>X-Scope-OrgID: cortex</code> header for multi-tenancy</li></ul><p><strong>Verify Prometheus is running:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex get pods -l app.kubernetes.io/name<span style=color:#f92672>=</span>prometheus
</span></span></code></pre></div><h2 id=step-8-deploy-grafana>Step 8: Deploy Grafana</h2><p>Deploy Grafana to visualize metrics from Cortex:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm upgrade --install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version<span style=color:#f92672>=</span>7.3.9 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --namespace cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  grafana grafana/grafana <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -f grafana-values.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --wait
</span></span></code></pre></div><p><strong>What&rsquo;s in <code>grafana-values.yaml</code>?</strong></p><ul><li>Configures Cortex as a datasource (pointing to <code>cortex-nginx</code>)</li><li>Enables sidecar for loading dashboards from ConfigMaps</li></ul><h3 id=load-cortex-dashboards>Load Cortex Dashboards</h3><p>Create ConfigMaps for Cortex operational dashboards:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#66d9ef>for</span> dashboard in <span style=color:#66d9ef>$(</span>ls dashboards<span style=color:#66d9ef>)</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  basename<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>basename -s .json $dashboard<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>  cmname<span style=color:#f92672>=</span>grafana-dashboard-$basename
</span></span><span style=display:flex><span>  kubectl create --namespace cortex configmap $cmname <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --from-file<span style=color:#f92672>=</span>$dashboard<span style=color:#f92672>=</span>dashboards/$dashboard <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --save-config<span style=color:#f92672>=</span>true -o yaml --dry-run<span style=color:#f92672>=</span>client | kubectl apply -f -
</span></span><span style=display:flex><span>  kubectl patch --namespace cortex configmap $cmname <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -p <span style=color:#e6db74>&#39;{&#34;metadata&#34;:{&#34;labels&#34;:{&#34;grafana_dashboard&#34;:&#34;1&#34;}}}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p><strong>What&rsquo;s happening?</strong></p><ul><li>Each dashboard JSON is stored in a ConfigMap</li><li>The <code>grafana_dashboard</code> label tells Grafana&rsquo;s sidecar to load it</li><li>Dashboards appear automatically in Grafana</li></ul><h2 id=step-9-access-the-services>Step 9: Access the Services</h2><p>Port-forward to access Grafana:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/grafana <span style=color:#ae81ff>3000</span> &amp;
</span></span></code></pre></div><p>Open <a href=http://localhost:3000>Grafana</a>.</p><p><strong>For other services, port-forward as needed:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Prometheus</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/prometheus-server <span style=color:#ae81ff>9090</span> &amp;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Cortex Nginx (API gateway)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex port-forward svc/cortex-nginx 8080:80 &amp;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Cortex Distributor (admin UI)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/cortex-distributor 9009:8080 &amp;
</span></span></code></pre></div><p><strong>Tip:</strong> Open a new terminal for each port-forward, or use <code>&</code> to run in the background.</p><h2 id=step-10-verify-data-flow>Step 10: Verify Data Flow</h2><h3 id=check-prometheus-is-sending-metrics>Check Prometheus is Sending Metrics</h3><p>Port-forward to Prometheus:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/prometheus-server <span style=color:#ae81ff>9090</span> &amp;
</span></span></code></pre></div><p>Open <a href=http://localhost:9090>Prometheus</a> and:</p><ol><li>Go to Status → Targets - verify targets are UP</li><li>Go to Query - verify <code>prometheus_remote_storage_samples_total</code> is increasing</li></ol><h3 id=query-metrics-in-cortex>Query Metrics in Cortex</h3><p>Port-forward to the Cortex API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward svc/cortex-nginx 8080:80 &amp;
</span></span></code></pre></div><p>Query metrics:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -H <span style=color:#e6db74>&#34;X-Scope-OrgID: cortex&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;http://localhost:8080/prometheus/api/v1/query?query=up&#34;</span> | jq
</span></span></code></pre></div><p><strong>Note:</strong> The <code>X-Scope-OrgID</code> header specifies the tenant. Cortex is multi-tenant.</p><h3 id=view-metrics-in-grafana>View Metrics in Grafana</h3><ol><li>Open <a href=http://localhost:3000>Grafana</a></li><li>Go to <a href=http://localhost:3000/explore>Explore</a></li><li>Select the &ldquo;Cortex&rdquo; datasource</li><li>Run a query: <code>up</code></li><li>You should see metrics from Prometheus!</li></ol><h3 id=view-cortex-dashboards>View Cortex Dashboards</h3><p>Navigate to <a href="http://localhost:3000/dashboards?tag=cortex">Dashboards</a> to see:</p><ul><li><strong>Cortex / Writes</strong>: Monitor the distributor and ingesters</li><li><strong>Cortex / Reads</strong>: Monitor the querier and query-frontend</li><li><strong>Cortex / Object Store</strong>: Monitor block storage operations</li><li><strong>Cortex / Compactor</strong>: Monitor block compaction</li></ul><h2 id=step-11-configure-rules-and-alerts-optional>Step 11: Configure Rules and Alerts (Optional)</h2><h3 id=port-forward-to-cortex-api>Port-Forward to Cortex API</h3><p>If not already running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward svc/cortex-nginx 8080:80 &amp;
</span></span></code></pre></div><h3 id=install-cortextool-if-needed>Install cortextool (if needed)</h3><p><strong>macOS:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wget https://github.com/cortexproject/cortex-tools/releases/download/v0.17.0/cortextool_0.17.0_mac-os_x86_64 -O cortextool
</span></span><span style=display:flex><span>chmod +x cortextool
</span></span><span style=display:flex><span>sudo mv cortextool /usr/local/bin/
</span></span></code></pre></div><p><strong>Linux:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wget https://github.com/cortexproject/cortex-tools/releases/download/v0.17.0/cortextool_0.17.0_linux_x86_64 -O cortextool
</span></span><span style=display:flex><span>chmod +x cortextool
</span></span><span style=display:flex><span>sudo mv cortextool /usr/local/bin/
</span></span></code></pre></div><p><strong>Or use Docker:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>alias cortextool<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;docker run --rm --network host -v </span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span><span style=color:#e6db74>:/workspace -w /workspace quay.io/cortexproject/cortex-tools:v0.17.0&#34;</span>
</span></span></code></pre></div><h3 id=load-recording-and-alerting-rules>Load Recording and Alerting Rules</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cortextool rules sync rules.yaml alerts.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --id cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --address http://localhost:8080
</span></span></code></pre></div><p><strong>What&rsquo;s happening?</strong></p><ul><li><code>rules.yaml</code> contains recording rules (pre-computed PromQL queries)</li><li><code>alerts.yaml</code> contains alerting rules (conditions that trigger alerts)</li><li>Rules are stored in S3 and evaluated by the ruler component</li></ul><h3 id=verify-rules-are-loaded>Verify Rules Are Loaded</h3><p>View rules in Grafana: <a href="http://localhost:3000/alerting/list?view=list&search=datasource:Cortex">Alerting → Alert rules</a></p><p>Or check via API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -H <span style=color:#e6db74>&#34;X-Scope-OrgID: cortex&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;http://localhost:8080/prometheus/api/v1/rules&#34;</span> | jq
</span></span></code></pre></div><h2 id=step-12-configure-alertmanager-optional>Step 12: Configure Alertmanager (Optional)</h2><p>Load Alertmanager configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cortextool alertmanager load alertmanager-config.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --id cortex <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --address http://localhost:8080
</span></span></code></pre></div><p><strong>Verify in Grafana:</strong> <a href="http://localhost:3000/alerting/notifications?search=&alertmanager=Cortex%20Alertmanager">Alerting → Notification policies</a></p><h2 id=explore-and-experiment>Explore and Experiment</h2><h3 id=experiment-1-scale-ingesters>Experiment 1: Scale Ingesters</h3><p>Cortex uses a hash ring to distribute time series across ingesters. Let&rsquo;s add more ingesters:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex scale deployment cortex-ingester --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
</span></span></code></pre></div><p><strong>Observe:</strong></p><ul><li>New ingesters join the ring</li><li>Time series are rebalanced</li><li>View the ring: Port-forward to a distributor and visit <a href=http://localhost:9009/ingester/ring>http://localhost:9009/ingester/ring</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/cortex-distributor 9009:8080
</span></span></code></pre></div><p><strong>Scale back down:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex scale deployment cortex-ingester --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=experiment-2-kill-an-ingester>Experiment 2: Kill an Ingester</h3><p>Simulate a failure by deleting a single ingester pod. This demonstrates Cortex&rsquo;s resilience.</p><p><strong>Step 1: List the ingester pods</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex get pods -l app.kubernetes.io/component<span style=color:#f92672>=</span>ingester
</span></span></code></pre></div><p>You should see multiple ingester pods (typically 3 replicas).</p><p><strong>Step 2: Delete one specific ingester pod</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Replace &lt;pod-name&gt; with an actual pod name from the list above</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex delete pod &lt;pod-name&gt; --force --grace-period<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex delete pod cortex-ingester-76d95464d8 --force --grace-period<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p><strong>Observe:</strong></p><ul><li>Queries still work (data is replicated across the remaining ingesters)</li><li>Kubernetes automatically restarts the deleted pod</li><li>The new ingester rejoins the ring</li><li>Check the ring status: Port-forward to a distributor and visit <a href=http://localhost:9009/ingester/ring>http://localhost:9009/ingester/ring</a></li></ul><p><strong>Why it works:</strong> Cortex replicates data across multiple ingesters (default: 3 replicas), so losing one ingester doesn&rsquo;t cause data loss.</p><h3 id=experiment-3-view-component-logs>Experiment 3: View Component Logs</h3><p>See what each component is doing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Distributor logs (receives metrics from Prometheus)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex logs -l app.kubernetes.io/component<span style=color:#f92672>=</span>distributor -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ingester logs (stores metrics in memory)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex logs -l app.kubernetes.io/component<span style=color:#f92672>=</span>ingester -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Querier logs (handles PromQL queries)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex logs -l app.kubernetes.io/component<span style=color:#f92672>=</span>querier -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Compactor logs (compacts blocks in S3)</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex logs -l app.kubernetes.io/component<span style=color:#f92672>=</span>compactor -f
</span></span></code></pre></div><h3 id=experiment-4-inspect-the-ring>Experiment 4: Inspect the Ring</h3><p>Cortex uses a hash ring for consistent hashing. View the ingester ring:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward deploy/cortex-distributor 9009:8080 &amp;
</span></span></code></pre></div><p>Open <a href=http://localhost:9009/ingester/ring>http://localhost:9009/ingester/ring</a> to see:</p><ul><li>Ingester tokens in the ring</li><li>Health status of each ingester</li><li>Token ownership ranges</li></ul><h3 id=experiment-5-check-block-storage>Experiment 5: Check Block Storage</h3><p>View blocks in SeaweedFS using the S3 API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl --namespace cortex port-forward svc/seaweedfs <span style=color:#ae81ff>8333</span> &amp;
</span></span></code></pre></div><p><strong>List buckets:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl --aws-sigv4 <span style=color:#e6db74>&#34;aws:amz:local:seaweedfs&#34;</span> --user <span style=color:#e6db74>&#34;any:any&#34;</span> http://localhost:8333
</span></span></code></pre></div><p><strong>List objects in the cortex-blocks bucket:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl --aws-sigv4 <span style=color:#e6db74>&#34;aws:amz:local:seaweedfs&#34;</span> --user <span style=color:#e6db74>&#34;any:any&#34;</span> http://localhost:8333/cortex-blocks?list-type<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>You&rsquo;ll see:</p><ul><li><code>cortex/</code> directory (tenant ID)</li><li>Block directories (named by ULID)</li><li>Each block contains <code>index</code>, <code>chunks/</code>, and <code>meta.json</code></li></ul><p><strong>Tip:</strong> You can also use the AWS CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>export AWS_ACCESS_KEY_ID<span style=color:#f92672>=</span>any
</span></span><span style=display:flex><span>export AWS_SECRET_ACCESS_KEY<span style=color:#f92672>=</span>any
</span></span><span style=display:flex><span>aws --endpoint-url<span style=color:#f92672>=</span>http://localhost:8333 s3 ls s3://cortex-blocks/cortex/
</span></span></code></pre></div><h2 id=configuration-files>Configuration Files</h2><table><thead><tr><th>File</th><th>Purpose</th></tr></thead><tbody><tr><td><code>seaweedfs.yaml</code></td><td>Kubernetes manifest for SeaweedFS (S3)</td></tr><tr><td><code>cortex-values.yaml</code></td><td>Helm values for Cortex (component config, storage)</td></tr><tr><td><code>prometheus-values.yaml</code></td><td>Helm values for Prometheus (scrape configs, remote_write)</td></tr><tr><td><code>grafana-values.yaml</code></td><td>Helm values for Grafana (datasources, dashboards)</td></tr><tr><td><code>rules.yaml</code></td><td>Recording rules for the ruler</td></tr><tr><td><code>alerts.yaml</code></td><td>Alerting rules for the ruler</td></tr><tr><td><code>alertmanager-config.yaml</code></td><td>Alertmanager notification configuration</td></tr></tbody></table><p><strong>Want to customize?</strong> Edit the Helm values files and upgrade:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm upgrade --namespace cortex cortex cortex-helm/cortex -f cortex-values.yaml
</span></span></code></pre></div><h2 id=troubleshooting>Troubleshooting</h2><h3 id=pods-are-pending-or-crashing>Pods are pending or crashing</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Check pod status</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex get pods
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Describe a pod to see events</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex describe pod &lt;pod-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check logs</span>
</span></span><span style=display:flex><span>kubectl --namespace cortex logs &lt;pod-name&gt;
</span></span></code></pre></div><h3 id=ingesters-wont-start>Ingesters won&rsquo;t start</h3><ul><li>Check that SeaweedFS is running and buckets are created</li><li>Verify the <code>cortex-values.yaml</code> has correct S3 config</li><li>Check logs: <code>kubectl --namespace cortex logs -l app.kubernetes.io/component=ingester</code></li></ul><h3 id=no-metrics-in-grafana>No metrics in Grafana</h3><ol><li>Check Prometheus remote_write is configured: <code>kubectl --namespace cortex get configmap prometheus-server -o yaml</code></li><li>Check distributor is receiving metrics: <code>kubectl --namespace cortex logs -l app.kubernetes.io/component=distributor</code></li><li>Test Cortex API directly: <code>curl -H "X-Scope-OrgID: cortex" "http://localhost:8080/prometheus/api/v1/query?query=up"</code></li></ol><h3 id=port-forward-fails>Port-forward fails</h3><ul><li>Check if port is already in use: <code>lsof -i :&lt;port></code></li><li>Kill existing process: <code>lsof -ti:&lt;port> | xargs kill</code></li></ul><h3 id=out-of-memory>Out of memory</h3><p>Kind requires Docker to have enough resources:</p><ul><li>Docker Desktop → Settings → Resources → Memory (set to 8GB+)</li></ul><h3 id=cortextool-commands-fail>cortextool commands fail</h3><ul><li>Make sure port-forward is running: <code>kubectl --namespace cortex port-forward svc/cortex-nginx 8080:80 &</code></li><li>Verify Cortex is responding: <code>curl http://localhost:8080/ready</code></li></ul><h2 id=clean-up>Clean Up</h2><h3 id=remove-port-forwards>Remove Port-Forwards</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Kill all kubectl port-forwards</span>
</span></span><span style=display:flex><span>killall kubectl
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Or kill specific port-forwards</span>
</span></span><span style=display:flex><span>lsof -ti:3000,8080,9009,9090 | xargs kill
</span></span></code></pre></div><h3 id=delete-the-kind-cluster>Delete the Kind Cluster</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kind delete cluster --name cortex-demo
</span></span></code></pre></div><p>This removes all Kubernetes resources and the Kind cluster.</p><h2 id=next-steps>Next Steps</h2><p>Congratulations! You&rsquo;ve successfully deployed Cortex in microservices mode on Kubernetes. Here&rsquo;s what to explore next:</p><ol><li><strong>Production Deployment</strong>: <a href=/docs/guides/running-cortex-on-kubernetes/>Run Cortex on real Kubernetes →</a></li><li><strong>Learn the Architecture</strong>: <a href=/docs/architecture/>Understand each component →</a></li><li><strong>Blocks Storage Deep Dive</strong>: <a href=/docs/blocks-storage/>How blocks storage works →</a></li><li><strong>High Availability</strong>: <a href=/docs/guides/zone-aware-replication/>Configure zone replication →</a></li><li><strong>Monitoring Cortex</strong>: <a href=/docs/guides/capacity-planning/>Capacity planning guide →</a></li><li><strong>Secure Your Deployment</strong>: <a href=/docs/guides/auth/>Set up authentication →</a></li></ol><h2 id=comparison-single-binary-vs-microservices>Comparison: Single Binary vs Microservices</h2><table><thead><tr><th>Aspect</th><th>Single Binary</th><th>Microservices</th></tr></thead><tbody><tr><td><strong>Components</strong></td><td>All in one process</td><td>Separate pods per component</td></tr><tr><td><strong>Scaling</strong></td><td>Vertical (bigger instance)</td><td>Horizontal (more pods)</td></tr><tr><td><strong>Resource Usage</strong></td><td>Lower (1 process)</td><td>Higher (multiple processes)</td></tr><tr><td><strong>Complexity</strong></td><td>Simple</td><td>Complex (orchestration needed)</td></tr><tr><td><strong>Failure Isolation</strong></td><td>None (single point of failure)</td><td>Yes (component failures isolated)</td></tr><tr><td><strong>Use Case</strong></td><td>Dev, testing, learning</td><td>Production deployments</td></tr></tbody></table><h2 id=additional-resources>Additional Resources</h2><ul><li><a href=https://cortexmetrics.io/docs/>Cortex Documentation</a></li><li><a href=https://github.com/cortexproject/cortex-helm-chart>Cortex Helm Chart</a></li><li><a href=/docs/architecture/>Cortex Architecture</a></li><li><a href=/docs/guides/running-cortex-on-kubernetes/>Running on Production Kubernetes</a></li><li><a href=https://cloud-native.slack.com/archives/cortex>CNCF Slack #cortex</a></li></ul></div></main></div></div><footer><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5"><div class="col-12 col-sm-4 pb-5 pb-sm-0"><img src=/images/cortex-stacked-white.png width=75px class="img-fluid float-left"></div><div class="col-12 col-sm-4 pb-5 pb-sm-0"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://slack.cncf.io class="text-reset text-white"><i class="fab fa-fw fa-slack"></i> Slack</a></li><li><a href=https://github.com/cortexproject/cortex class="text-reset text-white"><i class="fab fa-fw fa-github"></i> GitHub</a></li><li><a href=https://twitter.com/cortexmetrics class="text-reset text-white"><i class="fab fa-fw fa-twitter"></i> Twitter</a></li></ul></div><div class="col-12 col-sm-4"><h6 class=font-weight-bold>About</h6><p>Cortex is an OSS licensed project as Apache License 2.0</p></div></div><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5 text-center"><small class="col-12 text-center">© 2025 The Cortex Authors All Rights Reserved.<br>The Linux Foundation has registered trademarks and uses trademarks.
For a list of trademarks of The Linux Foundation, please see <a class="text-light alert-link" href=https://www.linuxfoundation.org/trademark-usage>Trademark Usage page</a>.</small></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>