<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=/docs/api/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>HTTP API | Cortex</title><meta name=description content="Cortex exposes an HTTP API for pushing and querying time series data, and operating the cluster itself.
For the sake of clarity, in this document we …"><meta property="og:title" content="HTTP API"><meta property="og:description" content="The horizontally scalable, highly available, multi-tenant, long term storage solution for Prometheus and OpenTelemetry Metrics."><meta property="og:type" content="website"><meta property="og:url" content="/docs/api/"><meta property="og:image" content="/images/logo-twitter-card.jpg"><meta property="og:site_name" content="Cortex"><meta itemprop=name content="HTTP API"><meta itemprop=description content="The horizontally scalable, highly available, multi-tenant, long term storage solution for Prometheus and OpenTelemetry Metrics."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/logo-twitter-card.jpg"><meta name=twitter:title content="HTTP API"><meta name=twitter:description content="The horizontally scalable, highly available, multi-tenant, long term storage solution for Prometheus and OpenTelemetry Metrics."><link rel=preload href=/scss/main.min.b2327889d9640582f368772c608732b32a6fa5b2b0c58b3d3c1d139029933f80.css as=style><link href=/scss/main.min.b2327889d9640582f368772c608732b32a6fa5b2b0c58b3d3c1d139029933f80.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SRR0DSREGX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SRR0DSREGX",{anonymize_ip:!1})}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar navbar-nocover"><a id=cortex-logo class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="-17.92 -14.92 1191.84 462.84"><defs><style>.cls-1{fill:#fff}</style></defs><path d="M214.531 8.017C99.353 8.017 5.65 101.72 5.65 216.899S99.353 425.78 214.531 425.78s208.882-93.704 208.882-208.882S329.71 8.017 214.531 8.017zm0 408.558c-110.102.0-199.676-89.574-199.676-199.676S104.429 17.222 214.53 17.222 414.208 106.797 414.208 216.9 324.633 416.575 214.53 416.575z" class="cls-1"/><circle cx="327.452" cy="221.633" r="34.571" class="cls-1"/><circle cx="213.713" cy="353.584" r="34.571" class="cls-1"/><path d="M299.992 167.913l-59-56.05a34.578 34.578.0 10-4.343 4.34l57.828 54.937a60.158 60.158.0 00-27.168 49.123h-12.97l-23.456-67.02-26.055 64.718H175.73l-24.724 57.22-21.808-54.524-.063.025v-.586h-22.048a34.582 34.582.0 10-.275 6.138h18.005l25.97 64.925 28.977-67.06h29.207l21.51-53.424 19.503 55.725H267.5a60.173 60.173.0 0025.202 44.11l-56.52 56.52 4.34 4.338 57.492-57.492a60.155 60.155.0 101.977-105.963zm81.481 53.515a54.02 54.02.0 11-54.022-54.02 54.083 54.083.0 0154.022 54.02zm175.707 42.568q-8.797 8.178-24.405 8.177a34.858 34.858.0 01-17.095-3.965 33.188 33.188.0 01-11.643-10.529 46.374 46.374.0 01-6.566-14.99 71.134 71.134.0 01-2.105-17.341 86.99 86.99.0 011.982-18.706 46.804 46.804.0 016.565-15.98 34.028 34.028.0 0112.263-11.149q7.675-4.21 19.077-4.212 13.38.0 21.306 6.69 7.927 6.689 10.405 18.829h21.803a50.76 50.76.0 00-5.946-19.696 44.06 44.06.0 00-12.015-13.75 49.842 49.842.0 00-16.848-8.051 77.44 77.44.0 00-20.44-2.601q-15.114.0-26.509 5.326a52.935 52.935.0 00-18.952 14.617 62.165 62.165.0 00-11.273 21.8 94.013 94.013.0 00-3.717 26.883 86.195 86.195.0 003.84 26.386 57.783 57.783.0 0011.397 20.686 50.138 50.138.0 0018.829 13.38 66.766 66.766.0 0025.891 4.705q24.527.0 38.772-12.882 14.245-12.878 17.715-36.668h-21.556q-1.986 14.867-10.776 23.041zm157.44-87.828a56.338 56.338.0 00-19.447-14.244q-11.52-5.203-26.882-5.203-15.115.0-26.756 5.203a56.009 56.009.0 00-19.573 14.244 59.75 59.75.0 00-11.892 21.307 85.299 85.299.0 00-3.965 26.386 84.117 84.117.0 003.965 26.262 59.853 59.853.0 0011.892 21.183 54.61 54.61.0 0019.573 14.12q11.643 5.077 26.756 5.08 15.36.0 26.882-5.08a54.908 54.908.0 0019.447-14.12 59.95 59.95.0 0011.892-21.183 84.181 84.181.0 003.965-26.262 85.364 85.364.0 00-3.965-26.386 59.846 59.846.0 00-11.892-21.307zm-9.538 68.38a43.305 43.305.0 01-8.548 15.113 37.061 37.061.0 01-12.759 9.29 38.825 38.825.0 01-30.968.0 37.003 37.003.0 01-12.76-9.29 43.209 43.209.0 01-8.547-15.114 70.669 70.669.0 010-41.373 44.634 44.634.0 018.547-15.237 36.428 36.428.0 0112.76-9.415 38.826 38.826.0 0130.968.0 36.484 36.484.0 0112.76 9.415 44.735 44.735.0 018.547 15.237 70.624 70.624.0 010 41.373zm81.141-80.89q-11.147 7.434-18.83 23.041h-.493v-27.005h-19.82V287.78h21.057v-56.984a87.528 87.528.0 012.478-21.924 41.993 41.993.0 017.93-16.228 33.951 33.951.0 0114.368-10.158q8.919-3.468 21.555-3.468V156.72q-17.097-.493-28.245 6.937zm80.761-42.366h-21.06v38.402h-21.8v18.581h21.8v81.51a48.668 48.668.0 001.734 14.37 17.432 17.432.0 005.326 8.423 20.57 20.57.0 009.415 4.088 75.59 75.59.0 0013.999 1.115h16.104v-18.582h-9.664a70.335 70.335.0 01-8.05-.37 10.361 10.361.0 01-4.833-1.611 6.108 6.108.0 01-2.354-3.469 23.006 23.006.0 01-.617-5.946v-79.528h25.518v-18.581h-25.518zm148.522 60.452a56.135 56.135.0 00-18.085-17.962q-11.276-7.063-28.367-7.06a58.263 58.263.0 00-24.155 4.953A56.796 56.796.0 00925.82 175.55a63.949 63.949.0 00-12.51 21.058 77.064 77.064.0 00-4.461 26.758 102.521 102.521.0 004.338 27.004 58.87 58.87.0 0011.519 21.307 52.43 52.43.0 0018.953 13.873q11.272 4.954 26.632 4.955 21.8.0 36.173-10.901 14.364-10.898 18.58-32.455h-20.81q-2.73 12.635-11.272 18.829-8.549 6.198-21.927 6.195a43.577 43.577.0 01-18.085-3.468 35.417 35.417.0 01-12.636-9.291 36.127 36.127.0 01-7.184-13.38 50.746 50.746.0 01-1.981-15.98h95.879a102.07 102.07.0 00-2.107-24.526 71.064 71.064.0 00-9.415-23.784zm-84.357 29.73a43.81 43.81.0 013.219-13.999 37.354 37.354.0 017.433-11.52 34.013 34.013.0 0111.272-7.803 36.694 36.694.0 0114.74-2.85 36.062 36.062.0 0114.494 2.85 36.492 36.492.0 0111.398 7.68 36.107 36.107.0 017.68 11.52 43.253 43.253.0 013.345 14.122zm170.95 7.184 44.1-58.964h-25.271l-31.961 44.843-30.721-44.843h-27.006l44.595 60.698-48.063 67.389h25.518l35.677-53.019 35.676 53.019h27.006l-49.55-69.123z" class="cls-1"/></svg></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://twitter.com/cortexmetrics class="nav-link active"><span class=active><i class="fab fa-fw fa-twitter"></i> Twitter</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://github.com/cortexproject class="nav-link active"><span class=active><i class="fab fa-fw fa-github"></i> GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-md-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.98e57a1f1c950bf70a0ba1e41973273d.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.98e57a1f1c950bf70a0ba1e41973273d.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-started-li><a href=/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsarchitecture-li><a href=/docs/architecture/ title="Cortex Architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsarchitecture><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsblocks-storage-li><a href=/docs/blocks-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsblocks-storage><span>Blocks Storage</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagequerier-li><a href=/docs/blocks-storage/querier/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagequerier><span>Querier</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagestore-gateway-li><a href=/docs/blocks-storage/store-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagestore-gateway><span>Store-gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagecompactor-li><a href=/docs/blocks-storage/compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagecompactor><span>Compactor</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storageproduction-tips-li><a href=/docs/blocks-storage/production-tips/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageproduction-tips><span>Production tips</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagebinary-index-header-li><a href=/docs/blocks-storage/binary-index-header/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebinary-index-header><span>Binary index-header</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagebucket-index-li><a href=/docs/blocks-storage/bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebucket-index><span>Bucket Index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks-li><a href=/docs/blocks-storage/migrate-cortex-cluster-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks><span>Migrate Cortex cluster from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks-li><a href=/docs/blocks-storage/convert-long-term-storage-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks><span>Convert long-term storage from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus-li><a href=/docs/blocks-storage/migrate-storage-from-thanos-and-prometheus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus><span>Migrate the storage from Thanos and Prometheus</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsblocks-storagelearn-more-li><a href=/docs/blocks-storage/learn-more/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagelearn-more><span>Learn more</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconfiguration-li><a href=/docs/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsconfiguration><span>Configuration</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationconfiguration-file-li><a href=/docs/configuration/configuration-file/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationconfiguration-file><span>Configuration file</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationarguments-li><a href=/docs/configuration/arguments/ title="Cortex Arguments" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationarguments><span>Cortex Arguments Explained</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationprometheus-frontend-li><a href=/docs/configuration/prometheus-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationprometheus-frontend><span>Prometheus Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationv1guarantees-li><a href=/docs/configuration/v1guarantees/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationv1guarantees><span>v1.x Guarantees</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguides-li><a href=/docs/guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsguides><span>Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrunning-cortex-on-kubernetes-li><a href=/docs/guides/running-cortex-on-kubernetes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrunning-cortex-on-kubernetes><span>Running Cortex on Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesgetting-started-with-gossiped-ring-li><a href=/docs/guides/getting-started-with-gossiped-ring/ title="Getting started with gossiped ring" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesgetting-started-with-gossiped-ring><span>Getting started with a gossip ring cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesalertmanager-configuration-li><a href=/docs/guides/alertmanager-configuration/ title="Configuring Notification using Cortex Alertmanager" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesalertmanager-configuration><span>Alertmanager configuration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesauth-li><a href=/docs/guides/auth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesauth><span>Authentication and Authorisation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidescapacity-planning-li><a href=/docs/guides/capacity-planning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidescapacity-planning><span>Capacity Planning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesruler-sharding-li><a href=/docs/guides/ruler-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesruler-sharding><span>Config for horizontally scaling the Ruler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesha-pair-handling-li><a href=/docs/guides/ha-pair-handling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesha-pair-handling><span>Config for sending HA Pairs data to Cortex</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesencryption-at-rest-li><a href=/docs/guides/encryption-at-rest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesencryption-at-rest><span>Encryption at Rest</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-rolling-updates-li><a href=/docs/guides/ingesters-rolling-updates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-rolling-updates><span>Ingesters rolling updates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-scaling-up-and-down-li><a href=/docs/guides/ingesters-scaling-up-and-down/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-scaling-up-and-down><span>Ingesters scaling up and down</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesnative-histograms-li><a href=/docs/guides/native-histograms/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesnative-histograms><span>Native Histograms</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesopentelemetry-collector-li><a href=/docs/guides/opentelemetry-collector/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesopentelemetry-collector><span>OpenTelemetry Collector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesoverrides-exporter-li><a href=/docs/guides/overrides-exporter/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesoverrides-exporter><span>Overrides Exporter</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidespartition-compaction-li><a href=/docs/guides/partition-compaction/ title="Use Partition Compaction in Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidespartition-compaction><span>Partition Compaction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrule-evalutions-via-query-frontend-li><a href=/docs/guides/rule-evalutions-via-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrule-evalutions-via-query-frontend><span>Rule evaluations via query frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestls-li><a href=/docs/guides/tls/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestls><span>Securing communication between Cortex components with TLS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidessecurity-li><a href=/docs/guides/security/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidessecurity><span>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesshuffle-sharding-li><a href=/docs/guides/shuffle-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesshuffle-sharding><span>Shuffle Sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestracing-li><a href=/docs/guides/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestracing><span>Tracing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguideszone-aware-replication-li><a href=/docs/guides/zone-aware-replication/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguideszone-aware-replication><span>Zone Aware Replication</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesprotecting-cortex-from-heavy-queries-li><a href=/docs/guides/protecting-cortex-from-heavy-queries/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesprotecting-cortex-from-heavy-queries><span>Protecting Cortex from Heavy Queries</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguideslimitations-li><a href=/docs/guides/limitations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguideslimitations><span>Limitations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesglossary-li><a href=/docs/guides/glossary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesglossary><span>Glossary</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsapi-li><a href=/docs/api/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-docsapi><span class=td-sidebar-nav-active-item>HTTP API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><a href=/docs/operations/ title="Operating Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-auditor-li><a href=/docs/operations/query-auditor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-auditor><span>Query Auditor (tool)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-tee-li><a href=/docs/operations/query-tee/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-tee><span>Query Tee (service)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsrequests-mirroring-to-secondary-cluster-li><a href=/docs/operations/requests-mirroring-to-secondary-cluster/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsrequests-mirroring-to-secondary-cluster><span>Requests mirroring to secondary cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsscaling-query-frontend-li><a href=/docs/operations/scaling-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsscaling-query-frontend><span>Scaling the Query Frontend</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscase-studies-li><a href=/docs/case-studies/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscase-studies><span>Case Studies</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesgojek-li><a href=/docs/case-studies/gojek/ title="How Gojek Is Leveraging Cortex to Keep Up with Its Ever-Growing Scale" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesgojek><span>Gojek</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesrewe-digital-li><a href=/docs/case-studies/rewe-digital/ title="How Cortex helped REWE digital ensure stability while scaling services during the Covid-19 pandemic" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesrewe-digital><span>REWE digital</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesbuoyant-cloud-li><a href=/docs/case-studies/buoyant-cloud/ title="Buoyant Cloud and Cortex: Standing on the shoulders of Linkerd and Prometheus" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesbuoyant-cloud><span>Buoyant Cloud</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsproposals-li><a href=/docs/proposals/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsproposals><span>Proposals</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsauth-gateway-li><a href=/docs/proposals/auth-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsauth-gateway><span>Authentication Gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-bucket-index-li><a href=/docs/proposals/blocks-storage-bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-bucket-index><span>Blocks storage bucket index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-sharding-li><a href=/docs/proposals/blocks-storage-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-sharding><span>Blocks storage sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalscross-tenant-query-federation-li><a href=/docs/proposals/cross-tenant-query-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalscross-tenant-query-federation><span>Cross-Tenant Query Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-deletion-li><a href=/docs/proposals/tenant-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-deletion><span>Deletion of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsdocumentation-versioning-li><a href=/docs/proposals/documentation-versioning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsdocumentation-versioning><span>Documentation Versioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsgeneralize-modules-li><a href=/docs/proposals/generalize-modules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsgeneralize-modules><span>Generalize Modules Service to make it extensible</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalshttp-api-design-li><a href=/docs/proposals/http-api-design/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalshttp-api-design><span>HTTP API Design</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsingesters-migration-li><a href=/docs/proposals/ingesters-migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsingesters-migration><span>Migrating ingesters from chunks to blocks and back.</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparallel-compaction-li><a href=/docs/proposals/parallel-compaction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparallel-compaction><span>Parallel Compaction by Time Interval</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparquet-storage-li><a href=/docs/proposals/parquet-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparquet-storage><span>Parquet-based Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-retention-li><a href=/docs/proposals/tenant-retention/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-retention><span>Retention of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsring-multikey-li><a href=/docs/proposals/ring-multikey/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsring-multikey><span>Ring Multikey</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-ha-li><a href=/docs/proposals/ruler-ha/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-ha><span>Ruler HA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-high-availability-li><a href=/docs/proposals/ruler-high-availability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-high-availability><span>Ruler High Availability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-tenant-federation-li><a href=/docs/proposals/ruler-tenant-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-tenant-federation><span>Ruler Tenant Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-alertmanager-li><a href=/docs/proposals/scalable-alertmanager/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-alertmanager><span>Scalable Alertmanager</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-query-frontend-li><a href=/docs/proposals/scalable-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-query-frontend><span>Scalable Query Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-and-zone-awareness-li><a href=/docs/proposals/shuffle-sharding-and-zone-awareness/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-and-zone-awareness><span>Shuffle sharding and zone awareness</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-on-the-read-path-li><a href=/docs/proposals/shuffle-sharding-on-the-read-path/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-on-the-read-path><span>Shuffle sharding on the read path</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalssupport-metadata-api-li><a href=/docs/proposals/support-metadata-api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalssupport-metadata-api><span>Support metadata API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblock-storage-time-series-deletion-li><a href=/docs/proposals/block-storage-time-series-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblock-storage-time-series-deletion><span>Time Series Deletion from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstimeseries-partitioning-in-compactor-li><a href=/docs/proposals/timeseries-partitioning-in-compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstimeseries-partitioning-in-compactor><span>Timeseries Partitioning in Compactor</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributing-li><a href=/docs/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinggovernance-li><a href=/docs/contributing/governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinggovernance><span>Governance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributingdesign-patterns-and-code-conventions-li><a href=/docs/contributing/design-patterns-and-code-conventions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingdesign-patterns-and-code-conventions><span>Design patterns and Code conventions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-run-the-website-locally-li><a href=/docs/contributing/how-to-run-the-website-locally/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-run-the-website-locally><span>How to run the website locally</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-upgrade-golang-version-li><a href=/docs/contributing/how-to-upgrade-golang-version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-upgrade-golang-version><span>How to upgrade Golang version</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-integration-tests-work-li><a href=/docs/contributing/how-integration-tests-work/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-integration-tests-work><span>How integration tests work</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-update-the-build-image-li><a href=/docs/contributing/how-to-update-the-build-image/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-update-the-build-image><span>How to update the build image</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-add-a-maintainer-li><a href=/docs/contributing/how-to-add-a-maintainer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-add-a-maintainer><span>How to add a maintainer</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsroadmap-li><a href=/docs/roadmap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsroadmap><span>Roadmap</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docschangelog-li><a href=/docs/changelog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docschangelog><span>Changelog</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscode-of-conduct-li><a href=/docs/code-of-conduct/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscode-of-conduct><span>Code of Conduct</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cortexproject/cortex/edit/master/docs/api/_index.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cortexproject/cortex/issues/new?title=HTTP%20API" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cortexproject/cortex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#endpoints>Endpoints</a><ul><li><a href=#path-prefixes>Path prefixes</a></li><li><a href=#authentication>Authentication</a></li></ul></li><li><a href=#all-services>All services</a><ul><li><a href=#index-page>Index page</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#runtime-configuration>Runtime Configuration</a></li><li><a href=#services-status>Services status</a></li><li><a href=#readiness-probe>Readiness probe</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#pprof>Pprof</a></li><li><a href=#fgprof>Fgprof</a></li></ul></li><li><a href=#distributor>Distributor</a><ul><li><a href=#remote-write>Remote write</a></li><li><a href=#otlp-receiver>OTLP Receiver</a></li><li><a href=#distributor-ring-status>Distributor ring status</a></li><li><a href=#tenants-stats>Tenants stats</a></li><li><a href=#ha-tracker-status>HA tracker status</a></li></ul></li><li><a href=#ingester>Ingester</a><ul><li><a href=#flush-blocks>Flush blocks</a></li><li><a href=#shutdown>Shutdown</a></li><li><a href=#ingesters-ring-status>Ingesters ring status</a></li><li><a href=#ingester-tenants-stats>Ingester tenants stats</a></li><li><a href=#ingester-mode>Ingester mode</a></li></ul></li><li><a href=#querier--query-frontend>Querier / Query-frontend</a><ul><li><a href=#instant-query>Instant query</a></li><li><a href=#range-query>Range query</a></li><li><a href=#exemplar-query>Exemplar query</a></li><li><a href=#get-series-by-label-matchers>Get series by label matchers</a></li><li><a href=#get-label-names>Get label names</a></li><li><a href=#get-label-values>Get label values</a></li><li><a href=#get-metric-metadata>Get metric metadata</a></li><li><a href=#remote-read>Remote read</a></li><li><a href=#build-information>Build Information</a></li></ul></li><li><a href=#querier>Querier</a><ul><li><a href=#get-tenant-ingestion-stats>Get tenant ingestion stats</a></li></ul></li><li><a href=#ruler>Ruler</a><ul><li><a href=#ruler-ring-status>Ruler ring status</a></li><li><a href=#ruler-rules>Ruler rules</a></li><li><a href=#list-rules>List rules</a></li><li><a href=#list-alerts>List alerts</a></li><li><a href=#list-rule-groups>List rule groups</a></li><li><a href=#get-rule-groups-by-namespace>Get rule groups by namespace</a></li><li><a href=#get-rule-group>Get rule group</a></li><li><a href=#set-rule-group>Set rule group</a></li><li><a href=#delete-rule-group>Delete rule group</a></li><li><a href=#delete-namespace>Delete namespace</a></li><li><a href=#delete-tenant-configuration>Delete tenant configuration</a></li></ul></li><li><a href=#alertmanager>Alertmanager</a><ul><li><a href=#alertmanager-status>Alertmanager status</a></li><li><a href=#alertmanager-configs>Alertmanager configs</a></li><li><a href=#alertmanager-ring-status>Alertmanager ring status</a></li><li><a href=#alertmanager-ui>Alertmanager UI</a></li><li><a href=#alertmanager-delete-tenant-configuration>Alertmanager Delete Tenant Configuration</a></li><li><a href=#get-alertmanager-configuration>Get Alertmanager configuration</a></li><li><a href=#set-alertmanager-configuration>Set Alertmanager configuration</a></li><li><a href=#delete-alertmanager-configuration>Delete Alertmanager configuration</a></li></ul></li><li><a href=#purger>Purger</a><ul><li><a href=#tenant-delete-request>Tenant Delete Request</a></li><li><a href=#tenant-delete-status>Tenant Delete Status</a></li></ul></li><li><a href=#store-gateway>Store-gateway</a><ul><li><a href=#store-gateway-ring-status>Store-gateway ring status</a></li></ul></li><li><a href=#compactor>Compactor</a><ul><li><a href=#compactor-ring-status>Compactor ring status</a></li></ul></li><li><a href=#configs-api>Configs API</a><ul><li></li><li><a href=#get-rule-files>Get rule files</a></li><li><a href=#set-rule-files>Set rule files</a></li><li><a href=#get-template-files>Get template files</a></li><li><a href=#set-template-files>Set template files</a></li><li><a href=#set-alertmanager-config-file>Set Alertmanager config file</a></li><li><a href=#validate-alertmanager-config-file>Validate Alertmanager config file</a></li><li><a href=#deactivate-configs>Deactivate configs</a></li><li><a href=#restore-configs>Restore configs</a></li></ul></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-projects"><h5 class=taxonomy-title>Our Projects</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/projects/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/blog/ data-taxonomy-term=blog><span class=taxonomy-label>blog</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/community/ data-taxonomy-term=community><span class=taxonomy-label>community</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/updates/ data-taxonomy-term=updates><span class=taxonomy-label>updates</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/api/ aria-disabled=true class="btn-link disabled">HTTP API</a></li></ol></nav><div class=td-content><h1>HTTP API</h1><header class=article-meta></header><p>Cortex exposes an HTTP API for pushing and querying time series data, and operating the cluster itself.</p><p>For the sake of clarity, in this document we have grouped API endpoints by service, but keep in mind that they&rsquo;re exposed both when running Cortex in microservices and singly-binary mode:</p><ul><li><strong>Microservices</strong>: each service exposes its own endpoints</li><li><strong>Single-binary</strong>: the Cortex process exposes all API endpoints for the services running internally</li></ul><h2 id=endpoints>Endpoints</h2><table><thead><tr><th>API</th><th>Service</th><th>Available Since</th><th>Endpoint</th></tr></thead><tbody><tr><td><a href=#index-page>Index page</a></td><td><em>All services</em></td><td></td><td><code>GET /</code></td></tr><tr><td><a href=#configuration>Configuration</a></td><td><em>All services</em></td><td></td><td><code>GET /config</code></td></tr><tr><td><a href=#runtime-configuration>Runtime Configuration</a></td><td><em>All services</em></td><td></td><td><code>GET /runtime_config</code></td></tr><tr><td><a href=#services-status>Services status</a></td><td><em>All services</em></td><td></td><td><code>GET /services</code></td></tr><tr><td><a href=#readiness-probe>Readiness probe</a></td><td><em>All services</em></td><td></td><td><code>GET /ready</code></td></tr><tr><td><a href=#metrics>Metrics</a></td><td><em>All services</em></td><td></td><td><code>GET /metrics</code></td></tr><tr><td><a href=#pprof>Pprof</a></td><td><em>All services</em></td><td></td><td><code>GET /debug/pprof</code></td></tr><tr><td><a href=#fgprof>Fgprof</a></td><td><em>All services</em></td><td></td><td><code>GET /debug/fgprof</code></td></tr><tr><td><a href=#remote-write>Remote write</a></td><td>Distributor</td><td></td><td><code>POST /api/v1/push</code></td></tr><tr><td><a href=#otlp-receiver>OTLP receiver</a></td><td>Distributor</td><td></td><td><code>POST /api/v1/otlp/v1/metrics</code></td></tr><tr><td><a href=#tenants-stats>Tenants stats</a></td><td>Distributor</td><td></td><td><code>GET /distributor/all_user_stats</code></td></tr><tr><td><a href=#ha-tracker-status>HA tracker status</a></td><td>Distributor</td><td></td><td><code>GET /distributor/ha_tracker</code></td></tr><tr><td><a href=#flush-blocks>Flush blocks</a></td><td>Ingester</td><td></td><td><code>GET,POST /ingester/flush</code></td></tr><tr><td><a href=#shutdown>Shutdown</a></td><td>Ingester</td><td></td><td><code>GET,POST /ingester/shutdown</code></td></tr><tr><td><a href=#ingesters-ring-status>Ingesters ring status</a></td><td>Ingester</td><td></td><td><code>GET /ingester/ring</code></td></tr><tr><td><a href=#ingester-tenants-stats>Ingester tenants stats</a></td><td>Ingester</td><td></td><td><code>GET /ingester/all_user_stats</code></td></tr><tr><td><a href=#ingester-mode>Ingester mode</a></td><td>Ingester</td><td></td><td><code>GET,POST /ingester/mode</code></td></tr><tr><td><a href=#instant-query>Instant query</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/query</code></td></tr><tr><td><a href=#range-query>Range query</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/query_range</code></td></tr><tr><td><a href=#exemplar-query>Exemplar query</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/query_exemplars</code></td></tr><tr><td><a href=#get-series-by-label-matchers>Get series by label matchers</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/series</code></td></tr><tr><td><a href=#get-label-names>Get label names</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/labels</code></td></tr><tr><td><a href=#get-label-values>Get label values</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET &lt;prometheus-http-prefix>/api/v1/label/{name}/values</code></td></tr><tr><td><a href=#get-metric-metadata>Get metric metadata</a></td><td>Querier, Query-frontend</td><td></td><td><code>GET &lt;prometheus-http-prefix>/api/v1/metadata</code></td></tr><tr><td><a href=#remote-read>Remote read</a></td><td>Querier, Query-frontend</td><td></td><td><code>POST &lt;prometheus-http-prefix>/api/v1/read</code></td></tr><tr><td><a href=#build-information>Build information</a></td><td>Querier, Query-frontend</td><td>v1.15.0</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/status/buildinfo</code></td></tr><tr><td><a href=#get-tenant-ingestion-stats>Get tenant ingestion stats</a></td><td>Querier</td><td></td><td><code>GET /api/v1/user_stats</code></td></tr><tr><td><a href=#ruler-ring-status>Ruler ring status</a></td><td>Ruler</td><td></td><td><code>GET /ruler/ring</code></td></tr><tr><td><a href=#ruler-rule-groups>Ruler rules</a></td><td>Ruler</td><td></td><td><code>GET /ruler/rule_groups</code></td></tr><tr><td><a href=#list-rules>List rules</a></td><td>Ruler</td><td></td><td><code>GET &lt;prometheus-http-prefix>/api/v1/rules</code></td></tr><tr><td><a href=#list-alerts>List alerts</a></td><td>Ruler</td><td></td><td><code>GET &lt;prometheus-http-prefix>/api/v1/alerts</code></td></tr><tr><td><a href=#list-rule-groups>List rule groups</a></td><td>Ruler</td><td></td><td><code>GET /api/v1/rules</code></td></tr><tr><td><a href=#get-rule-groups-by-namespace>Get rule groups by namespace</a></td><td>Ruler</td><td></td><td><code>GET /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#get-rule-group>Get rule group</a></td><td>Ruler</td><td></td><td><code>GET /api/v1/rules/{namespace}/{groupName}</code></td></tr><tr><td><a href=#set-rule-group>Set rule group</a></td><td>Ruler</td><td></td><td><code>POST /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#delete-rule-group>Delete rule group</a></td><td>Ruler</td><td></td><td><code>DELETE /api/v1/rules/{namespace}/{groupName}</code></td></tr><tr><td><a href=#delete-namespace>Delete namespace</a></td><td>Ruler</td><td></td><td><code>DELETE /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#delete-tenant-configuration>Delete tenant configuration</a></td><td>Ruler</td><td></td><td><code>POST /ruler/delete_tenant_config</code></td></tr><tr><td><a href=#alertmanager-status>Alertmanager status</a></td><td>Alertmanager</td><td></td><td><code>GET /multitenant_alertmanager/status</code></td></tr><tr><td><a href=#alertmanager-configs>Alertmanager configs</a></td><td>Alertmanager</td><td></td><td><code>GET /multitenant_alertmanager/configs</code></td></tr><tr><td><a href=#alertmanager-ring-status>Alertmanager ring status</a></td><td>Alertmanager</td><td></td><td><code>GET /multitenant_alertmanager/ring</code></td></tr><tr><td><a href=#alertmanager-ui>Alertmanager UI</a></td><td>Alertmanager</td><td></td><td><code>GET /&lt;alertmanager-http-prefix></code></td></tr><tr><td><a href=#alertmanager-delete-tenant-configuration>Alertmanager Delete Tenant Configuration</a></td><td>Alertmanager</td><td></td><td><code>POST /multitenant_alertmanager/delete_tenant_config</code></td></tr><tr><td><a href=#get-alertmanager-configuration>Get Alertmanager configuration</a></td><td>Alertmanager</td><td></td><td><code>GET /api/v1/alerts</code></td></tr><tr><td><a href=#set-alertmanager-configuration>Set Alertmanager configuration</a></td><td>Alertmanager</td><td></td><td><code>POST /api/v1/alerts</code></td></tr><tr><td><a href=#delete-alertmanager-configuration>Delete Alertmanager configuration</a></td><td>Alertmanager</td><td></td><td><code>DELETE /api/v1/alerts</code></td></tr><tr><td><a href=#tenant-delete-request>Tenant delete request</a></td><td>Purger</td><td></td><td><code>POST /purger/delete_tenant</code></td></tr><tr><td><a href=#tenant-delete-status>Tenant delete status</a></td><td>Purger</td><td></td><td><code>GET /purger/delete_tenant_status</code></td></tr><tr><td><a href=#store-gateway-ring-status>Store-gateway ring status</a></td><td>Store-gateway</td><td></td><td><code>GET /store-gateway/ring</code></td></tr><tr><td><a href=#compactor-ring-status>Compactor ring status</a></td><td>Compactor</td><td></td><td><code>GET /compactor/ring</code></td></tr><tr><td><a href=#get-rule-files>Get rule files</a></td><td>Configs API (deprecated)</td><td></td><td><code>GET /api/prom/configs/rules</code></td></tr><tr><td><a href=#set-rule-files>Set rule files</a></td><td>Configs API (deprecated)</td><td></td><td><code>POST /api/prom/configs/rules</code></td></tr><tr><td><a href=#get-template-files>Get template files</a></td><td>Configs API (deprecated)</td><td></td><td><code>GET /api/prom/configs/templates</code></td></tr><tr><td><a href=#set-template-files>Set template files</a></td><td>Configs API (deprecated)</td><td></td><td><code>POST /api/prom/configs/templates</code></td></tr><tr><td><a href=#get-alertmanager-config-file>Get Alertmanager config file</a></td><td>Configs API (deprecated)</td><td></td><td><code>GET /api/prom/configs/alertmanager</code></td></tr><tr><td><a href=#set-alertmanager-config-file>Set Alertmanager config file</a></td><td>Configs API (deprecated)</td><td></td><td><code>POST /api/prom/configs/alertmanager</code></td></tr><tr><td><a href=#validate-alertmanager-config-file>Validate Alertmanager config</a></td><td>Configs API (deprecated)</td><td></td><td><code>POST /api/prom/configs/alertmanager/validate</code></td></tr><tr><td><a href=#deactivate-configs>Deactivate configs</a></td><td>Configs API (deprecated)</td><td></td><td><code>DELETE /api/prom/configs/deactivate</code></td></tr><tr><td><a href=#restore-configs>Restore configs</a></td><td>Configs API (deprecated)</td><td></td><td><code>POST /api/prom/configs/restore</code></td></tr></tbody></table><h3 id=path-prefixes>Path prefixes</h3><p>In this documentation you will find the usage of some placeholders for the path prefixes, whenever the prefix is configurable. The following table shows the supported prefixes.</p><table><thead><tr><th>Prefix</th><th>Default</th><th>CLI Flag</th><th>YAML Config</th></tr></thead><tbody><tr><td><code>&lt;legacy-http-prefix></code></td><td><code>/api/prom</code></td><td><code>-http.prefix</code></td><td><code>http_prefix</code></td></tr><tr><td><code>&lt;prometheus-http-prefix></code></td><td><code>/prometheus</code></td><td><code>-http.prometheus-http-prefix</code></td><td><code>api > prometheus_http_prefix</code></td></tr><tr><td><code>&lt;alertmanager-http-prefix></code></td><td><code>/alertmanager</code></td><td><code>-http.alertmanager-http-prefix</code></td><td><code>api > alertmanager_http_prefix</code></td></tr></tbody></table><h3 id=authentication>Authentication</h3><p>When multi-tenancy is enabled, endpoints requiring authentication are expected to be called with the <code>X-Scope-OrgID</code> HTTP request header set to the tenant ID. Otherwise, when multi-tenancy is disabled, Cortex doesn&rsquo;t require any request to have the <code>X-Scope-OrgID</code> header.</p><p>Multi-tenancy can be enabled/disabled via the CLI flag <code>-auth.enabled</code> or its respective YAML config option.</p><p><em>For more information, please refer to the dedicated <a href=/docs/guides/auth/>Authentication and Authorisation</a> guide.</em></p><h2 id=all-services>All services</h2><p>The following API endpoints are exposed by all services.</p><h3 id=index-page>Index page</h3><pre tabindex=0><code>GET /
</code></pre><p>Displays an index page with links to other web pages exposed by Cortex.</p><h3 id=configuration>Configuration</h3><pre tabindex=0><code>GET /config
</code></pre><p>Displays the configuration currently applied to Cortex (in YAML format), including default values and settings via CLI flags. Sensitive data is masked. Please be aware that the exported configuration <strong>doesn&rsquo;t include the per-tenant overrides</strong>.</p><h4 id=different-modes>Different modes</h4><pre tabindex=0><code>GET /config?mode=diff
</code></pre><p>Displays the configuration currently applied to Cortex (in YAML format) as before, but containing only the values that differ from the default values.</p><pre tabindex=0><code>GET /config?mode=defaults
</code></pre><p>Displays the configuration using only the default values.</p><h3 id=runtime-configuration>Runtime Configuration</h3><pre tabindex=0><code>GET /runtime_config
</code></pre><p>Displays the runtime configuration currently applied to Cortex (in YAML format), including default values. Please be aware that the endpoint will be only available if Cortex is configured with the <code>-runtime-config.file</code> option.</p><h4 id=different-modes-1>Different modes</h4><pre tabindex=0><code>GET /runtime_config?mode=diff
</code></pre><p>Displays the runtime configuration currently applied to Cortex (in YAML format) as before, but containing only the values that differ from the default values.</p><h3 id=services-status>Services status</h3><pre tabindex=0><code>GET /services
</code></pre><p>Displays a web page with the status of internal Cortex services.</p><h3 id=readiness-probe>Readiness probe</h3><pre tabindex=0><code>GET /ready
</code></pre><p>Returns 200 when Cortex is ready to serve traffic.</p><h3 id=metrics>Metrics</h3><pre tabindex=0><code>GET /metrics
</code></pre><p>Returns the metrics for the running Cortex service in the Prometheus exposition format.</p><h3 id=pprof>Pprof</h3><pre tabindex=0><code>GET /debug/pprof/heap
GET /debug/pprof/block
GET /debug/pprof/profile
GET /debug/pprof/trace
GET /debug/pprof/goroutine
GET /debug/pprof/mutex
</code></pre><p>Returns the runtime profiling data in the format expected by the pprof visualization tool. There are many things which can be profiled using this including heap, trace, goroutine, etc.</p><p><em>For more information, please check out the official documentation of <a href=https://golang.org/pkg/net/http/pprof/>pprof</a>.</em></p><h3 id=fgprof>Fgprof</h3><pre tabindex=0><code>GET /debug/fgprof
</code></pre><p>Returns the sampling Go profiling data which allows you to analyze On-CPU as well as Off-CPU (e.g. I/O) time together.</p><p><em>For more information, please check out the official documentation of <a href=https://github.com/felixge/fgprof>fgprof</a>.</em></p><h2 id=distributor>Distributor</h2><h3 id=remote-write>Remote write</h3><pre tabindex=0><code>POST /api/v1/push

# Legacy
POST &lt;legacy-http-prefix&gt;/push
</code></pre><p>Entrypoint for the <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write>Prometheus remote write</a>.</p><p>This API endpoint accepts an HTTP POST request with a body containing a request encoded with <a href=https://developers.google.com/protocol-buffers>Protocol Buffers</a> and compressed with <a href=https://github.com/google/snappy>Snappy</a>. The definition of the protobuf message can be found in <a href=https://github.com/cortexproject/cortex/blob/master/pkg/cortexpb/cortex.proto#L12><code>cortex.proto</code></a>. The HTTP request should contain the header <code>X-Prometheus-Remote-Write-Version</code> set to <code>0.1.0</code>.</p><p><em>For more information, please check out Prometheus <a href=https://prometheus.io/docs/prometheus/latest/storage/#remote-storage-integrations>Remote storage integrations</a>.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=otlp-receiver>OTLP Receiver</h3><pre tabindex=0><code>POST /api/v1/otlp/v1/metrics
</code></pre><p>Entrypoint for the OTLP Receiver</p><p>This API endpoint accepts a HTTP POST request using <a href=https://opentelemetry.io/docs/specs/otlp/>OTLP</a> format</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=distributor-ring-status>Distributor ring status</h3><pre tabindex=0><code>GET /distributor/ring
</code></pre><p>Displays a web page with the distributor hash ring status, including the state, healthy and last heartbeat time of each distributor.</p><h3 id=tenants-stats>Tenants stats</h3><pre tabindex=0><code>GET /distributor/all_user_stats

# Legacy
GET /all_user_stats
</code></pre><p>Displays a web page with per-tenant statistics updated in realtime, including the total number of loaded blocks and active series across all ingesters as well as the current ingestion rate (samples / sec).</p><h3 id=ha-tracker-status>HA tracker status</h3><pre tabindex=0><code>GET /distributor/ha_tracker

# Legacy
GET /ha-tracker
</code></pre><p>Displays a web page with the current status of the HA tracker, including the elected replica for each Prometheus HA cluster.</p><h2 id=ingester>Ingester</h2><h3 id=flush-blocks>Flush blocks</h3><pre tabindex=0><code>GET,POST /ingester/flush

# Legacy
GET,POST /flush
</code></pre><p>Triggers a flush of the in-memory time series data to the long-term storage. This endpoint triggers the flush also when <code>-ingester.flush-on-shutdown-with-wal-enabled</code> or <code>-blocks-storage.tsdb.flush-blocks-on-shutdown</code> are disabled.</p><p>This endpoint accepts <code>tenant</code> parameter to specify tenant whose blocks are compacted and shipped. This parameter may be specified multiple times to select more tenants. If no tenant is specified, all tenants are flushed.</p><p>Flush endpoint now also accepts <code>wait=true</code> parameter, which makes the call synchronous – it will only return after flushing has finished. Note that returned status code does not reflect the result of flush operation.</p><h3 id=shutdown>Shutdown</h3><pre tabindex=0><code>GET,POST /ingester/shutdown

# Legacy
GET,POST /shutdown
</code></pre><p>Flushes in-memory time series data from ingester to the long-term storage, and shuts down the ingester service. Notice that the other Cortex services are still running, and the operator (or any automation) is expected to terminate the process with a <code>SIGINT</code> / <code>SIGTERM</code> signal after the shutdown endpoint returns. In the meantime, <code>/ready</code> will not return 200. This endpoint will unregister the ingester from the ring even if <code>-ingester.unregister-on-shutdown</code> is disabled.</p><p><em>This API endpoint is usually used by scale down automations.</em></p><h3 id=ingesters-ring-status>Ingesters ring status</h3><pre tabindex=0><code>GET /ingester/ring

# Legacy
GET /ring
</code></pre><p>Displays a web page with the ingesters hash ring status, including the state, healthy and last heartbeat time of each ingester.</p><h3 id=ingester-tenants-stats>Ingester tenants stats</h3><pre tabindex=0><code>GET /ingester/all_user_stats
</code></pre><p>Displays a web page with per-tenant statistics updated in realtime, including the total number of loaded blocks and active series from a specific ingester as well as the current ingestion rate (samples / sec).</p><h3 id=ingester-mode>Ingester mode</h3><pre tabindex=0><code>GET,POST /ingester/mode
</code></pre><p>Change ingester mode between ACTIVE or READONLY. READONLY ingester does not receive push requests and will only be called for query operations.</p><p>The endpoint accept query param <code>mode</code> or POST as <code>application/x-www-form-urlencoded</code> with mode type.</p><h2 id=querier--query-frontend>Querier / Query-frontend</h2><p>The following endpoints are exposed both by the querier and query-frontend.</p><h3 id=instant-query>Instant query</h3><pre tabindex=0><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/query

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/query
</code></pre><p>Prometheus-compatible instant query endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#instant-queries>instant query</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=range-query>Range query</h3><pre tabindex=0><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/query_range

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/query_range
</code></pre><p>Prometheus-compatible range query endpoint. When the request is sent through the query-frontend, the query will be accelerated by query-frontend (results caching and execution parallelisation).</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries>range query</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=exemplar-query>Exemplar query</h3><pre tabindex=0><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/query_exemplars

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/query_exemplars
</code></pre><p>Prometheus-compatible exemplar query endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#querying-exemplars>exemplar query</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-series-by-label-matchers>Get series by label matchers</h3><pre tabindex=0><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/series

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/series
</code></pre><p>Find series by label matchers. Starting from release v1.18.0, Cortex by default honors the <code>start</code> and <code>end</code> request parameters and fetches series from either ingester, store gateway or both. The special case is that if <code>start</code> param is not specified, Cortex currently fetches series from data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#finding-series-by-label-matchers>series endpoint</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-label-names>Get label names</h3><pre tabindex=0><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/labels

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/labels
</code></pre><p>Get label names of ingested series. Starting from release v1.18.0, Cortex by default honors the <code>start</code> and <code>end</code> request parameters and fetches label names from either ingester, store gateway or both. The special case is that if <code>start</code> param is not specified, Cortex currently fetches labels from data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#getting-label-names>get label names</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-label-values>Get label values</h3><pre tabindex=0><code>GET &lt;prometheus-http-prefix&gt;/api/v1/label/{name}/values

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/label/{name}/values
</code></pre><p>Get label values for a given label name. Starting from release v1.18.0, Cortex by default honors the <code>start</code> and <code>end</code> request parameters and fetches label values from either ingester, store gateway or both. The special case is that if <code>start</code> param is not specified, Cortex currently fetches label values from data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#querying-label-values>get label values</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-metric-metadata>Get metric metadata</h3><pre tabindex=0><code>GET &lt;prometheus-http-prefix&gt;/api/v1/metadata

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/metadata
</code></pre><p>Prometheus-compatible metric metadata endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#querying-metric-metadata>metric metadata</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=remote-read>Remote read</h3><pre tabindex=0><code>POST &lt;prometheus-http-prefix&gt;/api/v1/read

# Legacy
POST &lt;legacy-http-prefix&gt;/api/v1/read
</code></pre><p>Prometheus-compatible <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_read>remote read</a> endpoint.</p><p><em>For more information, please check out Prometheus <a href=https://prometheus.io/docs/prometheus/latest/storage/#remote-storage-integrations>Remote storage integrations</a>.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=build-information>Build Information</h3><pre tabindex=0><code>GET &lt;prometheus-http-prefix&gt;/api/v1/status/buildinfo
# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/status/buildinfo
</code></pre><p>Prometheus-compatible <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#build-information>build information</a> endpoint.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=querier>Querier</h2><h3 id=get-tenant-ingestion-stats>Get tenant ingestion stats</h3><pre tabindex=0><code>GET /api/v1/user_stats

# Legacy
GET &lt;legacy-http-prefix&gt;/user_stats
</code></pre><p>Returns realtime ingestion rate, for the authenticated tenant, in <code>JSON</code> format.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=ruler>Ruler</h2><p>The ruler API endpoints require to configure a backend object storage to store the recording rules and alerts. The ruler API uses the concept of a &ldquo;namespace&rdquo; when creating rule groups. This is a stand in for the name of the rule file in Prometheus and rule groups must be named uniquely within a namespace.</p><h3 id=ruler-ring-status>Ruler ring status</h3><pre tabindex=0><code>GET /ruler/ring

# Legacy
GET /ruler_ring
</code></pre><p>Displays a web page with the ruler hash ring status, including the state, healthy and last heartbeat time of each ruler.</p><h3 id=ruler-rules>Ruler rules</h3><pre tabindex=0><code>GET /ruler/rule_groups
</code></pre><p>List all tenant rules. This endpoint is not part of ruler-API and is always available regardless of whether ruler-API is enabled or not. It should not be exposed to end users. This endpoint returns a YAML dictionary with all the rule groups for each tenant and <code>200</code> status code on success.</p><h3 id=list-rules>List rules</h3><pre tabindex=0><code>GET &lt;prometheus-http-prefix&gt;/api/v1/rules

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/rules
</code></pre><p>Prometheus-compatible rules endpoint to list alerting and recording rules that are currently loaded.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#rules>rules</a> documentation.</em></p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=list-alerts>List alerts</h3><pre tabindex=0><code>GET &lt;prometheus-http-prefix&gt;/api/v1/alerts

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/alerts
</code></pre><p>Prometheus-compatible rules endpoint to list of all active alerts.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#alerts>alerts</a> documentation.</em></p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=list-rule-groups>List rule groups</h3><pre tabindex=0><code>GET /api/v1/rules

# Legacy
GET &lt;legacy-http-prefix&gt;/rules
</code></pre><p>List all rules configured for the authenticated tenant. This endpoint returns a YAML dictionary with all the rule groups for each namespace and <code>200</code> status code on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-response>Example response</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;namespace1&gt;</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>&lt;duration;optional&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>record</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>for</span>: <span style=color:#ae81ff>&lt;duration&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;annotation_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;label_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>&lt;duration;optional&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>record</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>for</span>: <span style=color:#ae81ff>&lt;duration&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;annotation_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;label_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;namespace2&gt;</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>&lt;duration;optional&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>record</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>for</span>: <span style=color:#ae81ff>&lt;duration&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;annotation_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;label_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span></code></pre></div><h3 id=get-rule-groups-by-namespace>Get rule groups by namespace</h3><pre tabindex=0><code>GET /api/v1/rules/{namespace}

# Legacy
GET &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Returns the rule groups defined for a given namespace.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-response-1>Example response</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>interval</span>: <span style=color:#ae81ff>&lt;duration;optional&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>record</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>for</span>: <span style=color:#ae81ff>&lt;duration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;annotation_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;label_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span></code></pre></div><h3 id=get-rule-group>Get rule group</h3><pre tabindex=0><code>GET /api/v1/rules/{namespace}/{groupName}

# Legacy
GET &lt;legacy-http-prefix&gt;/rules/{namespace}/{groupName}
</code></pre><p>Returns the rule group matching the request namespace and group name.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-rule-group>Set rule group</h3><pre tabindex=0><code>POST /api/v1/rules/{namespace}

# Legacy
POST &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Creates or updates a rule group. This endpoint expects a request with <code>Content-Type: application/yaml</code> header and the rules <strong>YAML</strong> definition in the request body, and returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-request>Example request</h4><p>Request headers:</p><ul><li><code>Content-Type: application/yaml</code></li></ul><p>Request body:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>interval</span>: <span style=color:#ae81ff>&lt;duration;optional&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>record</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alert</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>expr</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>for</span>: <span style=color:#ae81ff>&lt;duration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;annotation_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;label_name&gt;</span>: <span style=color:#ae81ff>&lt;string&gt;</span>
</span></span></code></pre></div><h3 id=delete-rule-group>Delete rule group</h3><pre tabindex=0><code>DELETE /api/v1/rules/{namespace}/{groupName}

# Legacy
DELETE &lt;legacy-http-prefix&gt;/rules/{namespace}/{groupName}
</code></pre><p>Deletes a rule group by namespace and group name. This endpoints returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=delete-namespace>Delete namespace</h3><pre tabindex=0><code>DELETE /api/v1/rules/{namespace}

# Legacy
DELETE &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Deletes all the rule groups in a namespace (including the namespace itself). This endpoint returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=delete-tenant-configuration>Delete tenant configuration</h3><pre tabindex=0><code>POST /ruler/delete_tenant_config
</code></pre><p>This deletes all rule groups for tenant, and returns <code>200</code> on success. Calling endpoint when no rule groups exist for user returns <code>200</code>. Authentication is only to identify the tenant.</p><p>This is intended as internal API, and not to be exposed to users. This endpoint is enabled regardless of whether <code>-experimental.ruler.enable-api</code> is enabled or not.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=alertmanager>Alertmanager</h2><h3 id=alertmanager-status>Alertmanager status</h3><pre tabindex=0><code>GET /multitenant_alertmanager/status

# Legacy (microservices mode only)
GET /status
</code></pre><p>Displays a web page with the current status of the Alertmanager, including the Alertmanager cluster members.</p><h3 id=alertmanager-configs>Alertmanager configs</h3><pre tabindex=0><code>GET /multitenant_alertmanager/configs
</code></pre><p>List all Alertmanager configurations. This endpoint is not part of alertmanager-API and is always available regardless of whether alertmanager-API is enabled or not. It should not be exposed to end users. This endpoint returns a YAML dictionary with all the Alertmanager configurations and <code>200</code> status code on success.</p><h3 id=alertmanager-ring-status>Alertmanager ring status</h3><pre tabindex=0><code>GET /multitenant_alertmanager/ring
</code></pre><p>Displays a web page with the Alertmanager hash ring status, including the state, healthy and last heartbeat time of each Alertmanager instance.</p><h3 id=alertmanager-ui>Alertmanager UI</h3><pre tabindex=0><code>GET /&lt;alertmanager-http-prefix&gt;

# Legacy (microservices mode only)
GET /&lt;legacy-http-prefix&gt;
</code></pre><p>Displays the Alertmanager UI.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=alertmanager-delete-tenant-configuration>Alertmanager Delete Tenant Configuration</h3><pre tabindex=0><code>POST /multitenant_alertmanager/delete_tenant_config
</code></pre><p>This endpoint deletes configuration for a tenant identified by <code>X-Scope-OrgID</code> header.
It is internal, available even if Alertmanager API is not enabled by using <code>-experimental.alertmanager.enable-api</code>.
The endpoint returns a status code of <code>200</code> if the user&rsquo;s configuration has been deleted, or it didn&rsquo;t exist in the first place.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-alertmanager-configuration>Get Alertmanager configuration</h3><pre tabindex=0><code>GET /api/v1/alerts
</code></pre><p>Get the current Alertmanager configuration for the authenticated tenant, reading it from the configured object storage.</p><p>This endpoint doesn&rsquo;t accept any URL query parameter and returns <code>200</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-alertmanager-configuration>Set Alertmanager configuration</h3><pre tabindex=0><code>POST /api/v1/alerts
</code></pre><p>Stores or updates the Alertmanager configuration for the authenticated tenant. The Alertmanager configuration is stored in the configured backend object storage.</p><p>This endpoint expects the Alertmanager <strong>YAML</strong> configuration in the request body and returns <code>201</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><blockquote><p><strong>Note:</strong> When using <code>curl</code> send the request body from a file, ensure that you use the <code>--data-binary</code> flag instead of <code>-d</code>, <code>--data</code>, or <code>--data-ascii</code>.
The latter options do not preserve carriage returns and newlines.</p></blockquote><h4 id=example-request-body>Example request body</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>template_files</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>default_template</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {{ define &#34;__alertmanager&#34; }}AlertManager{{ end }}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {{ define &#34;__alertmanagerURL&#34; }}{{ .ExternalURL }}/#/alerts?receiver={{ .Receiver | urlquery }}{{ end }}</span>    
</span></span><span style=display:flex><span><span style=color:#f92672>alertmanager_config</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  global:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    smtp_smarthost: &#39;localhost:25&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    smtp_from: &#39;youraddress@example.org&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  templates:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - &#39;default_template&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  route:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    receiver: example-email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  receivers:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - name: example-email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      email_configs:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - to: &#39;youraddress@example.org&#39;</span>  
</span></span></code></pre></div><h3 id=delete-alertmanager-configuration>Delete Alertmanager configuration</h3><pre tabindex=0><code>DELETE /api/v1/alerts
</code></pre><p>Deletes the Alertmanager configuration for the authenticated tenant.</p><p>This endpoint doesn&rsquo;t accept any URL query parameter and returns <code>200</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=purger>Purger</h2><p>The Purger service provides APIs for requesting deletion of tenants.</p><h3 id=tenant-delete-request>Tenant Delete Request</h3><pre tabindex=0><code>POST /purger/delete_tenant
</code></pre><p>Request deletion of ALL tenant data. Only works with blocks storage. Experimental.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=tenant-delete-status>Tenant Delete Status</h3><pre tabindex=0><code>GET /purger/delete_tenant_status
</code></pre><p>Returns status of tenant deletion. Output format to be defined. Experimental.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=store-gateway>Store-gateway</h2><h3 id=store-gateway-ring-status>Store-gateway ring status</h3><pre tabindex=0><code>GET /store-gateway/ring
</code></pre><p>Displays a web page with the store-gateway hash ring status, including the state, healthy and last heartbeat time of each store-gateway.</p><h2 id=compactor>Compactor</h2><h3 id=compactor-ring-status>Compactor ring status</h3><pre tabindex=0><code>GET /compactor/ring
</code></pre><p>Displays a web page with the compactor hash ring status, including the state, healthy and last heartbeat time of each compactor.</p><h2 id=configs-api>Configs API</h2><p><em>This service has been <strong>deprecated</strong> in favour of <a href=#ruler>Ruler</a> and <a href=#alertmanager>Alertmanager</a> API.</em></p><p>The configs API service provides an API-driven multi-tenant approach to handling various configuration files for Prometheus. The service hosts an API where users can read and write Prometheus rule files, Alertmanager configuration files, and Alertmanager templates to a database. Each tenant will have its own set of rule files, Alertmanager config, and templates.</p><h4 id=request--response-schema>Request / response schema</h4><p>The following schema is used both when retrieving the current configs from the API and when setting new configs via the API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>99</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rule_format_version&#34;</span>: <span style=color:#e6db74>&#34;2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;alertmanager_config&#34;</span>: <span style=color:#e6db74>&#34;&lt;standard alertmanager.yaml config&gt;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rules_files&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;rules.yaml&#34;</span>: <span style=color:#e6db74>&#34;&lt;standard rules.yaml config&gt;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;rules2.yaml&#34;</span>: <span style=color:#e6db74>&#34;&lt;standard rules.yaml config&gt;&#34;</span>
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;template_files&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;templates.tmpl&#34;</span>: <span style=color:#e6db74>&#34;&lt;standard template file&gt;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;templates2.tmpl&#34;</span>: <span style=color:#e6db74>&#34;&lt;standard template file&gt;&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><strong><code>id</code></strong><br>Should be incremented every time data is updated; Cortex will use the config with the highest number.</li><li><strong><code>rule_format_version</code></strong><br>Allows compatibility for tenants with config in Prometheus V1 format. Pass &ldquo;1&rdquo; or &ldquo;2&rdquo; according to which Prometheus version you want to match.</li><li><strong><code>alertmanager_config</code></strong><br>The contents of the alertmanager config file should be as described <a href=https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/>here</a>, encoded as a single string to fit within the overall JSON payload.</li><li><strong><code>config.rules_files</code></strong><br>The contents of a rules file should be as described <a href=http://prometheus.io/docs/prometheus/latest/configuration/recording_rules/>here</a>, encoded as a single string to fit within the overall JSON payload.</li><li><strong><code>config.template_files</code></strong><br>The contents of a template file should be as described <a href=https://prometheus.io/docs/alerting/notification_examples/#defining-reusable-templates>here</a>, encoded as a single string to fit within the overall JSON payload. These entries should match the <code>templates</code> entries in <code>alertmanager_config</code>. Example:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>template_files</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>myorg.tmpl</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {{ define &#34;__alertmanager&#34; }}AlertManager{{ end }}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {{ define &#34;__alertmanagerURL&#34; }}{{ .ExternalURL }}/#/alerts?receiver={{ .Receiver | urlquery }}{{ end }}</span>    
</span></span><span style=display:flex><span><span style=color:#f92672>alertmanager_config</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  templates:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - &#39;myorg.tmpl&#39;</span>  
</span></span></code></pre></div></li></ul><h3 id=get-rule-files>Get rule files</h3><pre tabindex=0><code>GET /api/prom/configs/rules
</code></pre><p>Get the current rule files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-rule-files>Set rule files</h3><pre tabindex=0><code>POST /api/prom/configs/rules
</code></pre><p>Replace the current rule files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-template-files>Get template files</h3><pre tabindex=0><code>GET /api/prom/configs/templates
</code></pre><p>Get the current template files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-template-files>Set template files</h3><pre tabindex=0><code>POST /api/prom/configs/templates
</code></pre><p>Replace the current template files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=get-alertmanager-config-file>Get Alertmanager config file</h4><pre tabindex=0><code>GET /api/prom/configs/alertmanager
</code></pre><p>Get the current Alertmanager config for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-alertmanager-config-file>Set Alertmanager config file</h3><pre tabindex=0><code>POST /api/prom/configs/alertmanager
</code></pre><p>Replace the current Alertmanager config for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=validate-alertmanager-config-file>Validate Alertmanager config file</h3><pre tabindex=0><code>POST /api/prom/configs/alertmanager/validate
</code></pre><p>Validate the Alertmanager config in the request body. The request body is expected to contain only the Alertmanager YAML config.</p><h3 id=deactivate-configs>Deactivate configs</h3><pre tabindex=0><code>DELETE /api/prom/configs/deactivate
</code></pre><p>Disable configs for the authenticated tenant. Please be aware that setting a new config will effectively &ldquo;re-enable&rdquo; the Rules and Alertmanager configuration for the tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=restore-configs>Restore configs</h3><pre tabindex=0><code>POST /api/prom/configs/restore
</code></pre><p>Re-enable configs for the authenticated tenant, after being previously deactivated.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><ul></ul></div></main></div></div><footer><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5"><div class="col-12 col-sm-4 pb-5 pb-sm-0"><img src=/images/cortex-stacked-white.png width=75px class="img-fluid float-left"></div><div class="col-12 col-sm-4 pb-5 pb-sm-0"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://slack.cncf.io class="text-reset text-white"><i class="fab fa-fw fa-slack"></i> Slack</a></li><li><a href=https://github.com/cortexproject/cortex class="text-reset text-white"><i class="fab fa-fw fa-github"></i> GitHub</a></li><li><a href=https://twitter.com/cortexmetrics class="text-reset text-white"><i class="fab fa-fw fa-twitter"></i> Twitter</a></li></ul></div><div class="col-12 col-sm-4"><h6 class=font-weight-bold>About</h6><p>Cortex is an OSS licensed project as Apache License 2.0</p></div></div><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5 text-center"><small class="col-12 text-center">© 2025 The Cortex Authors All Rights Reserved.<br>The Linux Foundation has registered trademarks and uses trademarks.
For a list of trademarks of The Linux Foundation, please see <a class="text-light alert-link" href=https://www.linuxfoundation.org/trademark-usage>Trademark Usage page</a>.</small></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>