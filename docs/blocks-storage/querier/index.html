<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Querier | Cortex</title><meta name=description content="
The querier service handles queries using the PromQL query language.  This document dives into the storage-specific details of the querier service. …</!-->"><meta property="og:title" content="Querier"><meta property="og:description" content="The querier service handles queries using the PromQL query language. This document dives into the storage-specific details of the querier service. The general architecture documentation applies too.
The querier is stateless.
How it works The querier needs to have an almost up-to-date view over the entire storage bucket, in order to find the right blocks to lookup at query time. The querier can keep the bucket view updated in to two different ways:"><meta property="og:type" content="article"><meta property="og:url" content="/docs/blocks-storage/querier/"><meta property="og:image" content="/images/logo-twitter-card.jpg"><meta property="article:section" content="docs"><meta property="og:site_name" content="Cortex"><meta itemprop=name content="Querier"><meta itemprop=description content="The querier service handles queries using the PromQL query language. This document dives into the storage-specific details of the querier service. The general architecture documentation applies too.
The querier is stateless.
How it works The querier needs to have an almost up-to-date view over the entire storage bucket, in order to find the right blocks to lookup at query time. The querier can keep the bucket view updated in to two different ways:"><meta itemprop=wordCount content="9318"><meta itemprop=image content="/images/logo-twitter-card.jpg"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/logo-twitter-card.jpg"><meta name=twitter:title content="Querier"><meta name=twitter:description content="The querier service handles queries using the PromQL query language. This document dives into the storage-specific details of the querier service. The general architecture documentation applies too.
The querier is stateless.
How it works The querier needs to have an almost up-to-date view over the entire storage bucket, in order to find the right blocks to lookup at query time. The querier can keep the bucket view updated in to two different ways:"><link rel=preload href=/scss/main.min.b2327889d9640582f368772c608732b32a6fa5b2b0c58b3d3c1d139029933f80.css as=style><link href=/scss/main.min.b2327889d9640582f368772c608732b32a6fa5b2b0c58b3d3c1d139029933f80.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SRR0DSREGX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SRR0DSREGX",{anonymize_ip:!1})}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar navbar-nocover"><a id=cortex-logo class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="-17.92 -14.92 1191.84 462.84"><defs><style>.cls-1{fill:#fff}</style></defs><path d="M214.531 8.017C99.353 8.017 5.65 101.72 5.65 216.899S99.353 425.78 214.531 425.78s208.882-93.704 208.882-208.882S329.71 8.017 214.531 8.017zm0 408.558c-110.102.0-199.676-89.574-199.676-199.676S104.429 17.222 214.53 17.222 414.208 106.797 414.208 216.9 324.633 416.575 214.53 416.575z" class="cls-1"/><circle cx="327.452" cy="221.633" r="34.571" class="cls-1"/><circle cx="213.713" cy="353.584" r="34.571" class="cls-1"/><path d="M299.992 167.913l-59-56.05a34.578 34.578.0 10-4.343 4.34l57.828 54.937a60.158 60.158.0 00-27.168 49.123h-12.97l-23.456-67.02-26.055 64.718H175.73l-24.724 57.22-21.808-54.524-.063.025v-.586h-22.048a34.582 34.582.0 10-.275 6.138h18.005l25.97 64.925 28.977-67.06h29.207l21.51-53.424 19.503 55.725H267.5a60.173 60.173.0 0025.202 44.11l-56.52 56.52 4.34 4.338 57.492-57.492a60.155 60.155.0 101.977-105.963zm81.481 53.515a54.02 54.02.0 11-54.022-54.02 54.083 54.083.0 0154.022 54.02zm175.707 42.568q-8.797 8.178-24.405 8.177a34.858 34.858.0 01-17.095-3.965 33.188 33.188.0 01-11.643-10.529 46.374 46.374.0 01-6.566-14.99 71.134 71.134.0 01-2.105-17.341 86.99 86.99.0 011.982-18.706 46.804 46.804.0 016.565-15.98 34.028 34.028.0 0112.263-11.149q7.675-4.21 19.077-4.212 13.38.0 21.306 6.69 7.927 6.689 10.405 18.829h21.803a50.76 50.76.0 00-5.946-19.696 44.06 44.06.0 00-12.015-13.75 49.842 49.842.0 00-16.848-8.051 77.44 77.44.0 00-20.44-2.601q-15.114.0-26.509 5.326a52.935 52.935.0 00-18.952 14.617 62.165 62.165.0 00-11.273 21.8 94.013 94.013.0 00-3.717 26.883 86.195 86.195.0 003.84 26.386 57.783 57.783.0 0011.397 20.686 50.138 50.138.0 0018.829 13.38 66.766 66.766.0 0025.891 4.705q24.527.0 38.772-12.882 14.245-12.878 17.715-36.668h-21.556q-1.986 14.867-10.776 23.041zm157.44-87.828a56.338 56.338.0 00-19.447-14.244q-11.52-5.203-26.882-5.203-15.115.0-26.756 5.203a56.009 56.009.0 00-19.573 14.244 59.75 59.75.0 00-11.892 21.307 85.299 85.299.0 00-3.965 26.386 84.117 84.117.0 003.965 26.262 59.853 59.853.0 0011.892 21.183 54.61 54.61.0 0019.573 14.12q11.643 5.077 26.756 5.08 15.36.0 26.882-5.08a54.908 54.908.0 0019.447-14.12 59.95 59.95.0 0011.892-21.183 84.181 84.181.0 003.965-26.262 85.364 85.364.0 00-3.965-26.386 59.846 59.846.0 00-11.892-21.307zm-9.538 68.38a43.305 43.305.0 01-8.548 15.113 37.061 37.061.0 01-12.759 9.29 38.825 38.825.0 01-30.968.0 37.003 37.003.0 01-12.76-9.29 43.209 43.209.0 01-8.547-15.114 70.669 70.669.0 010-41.373 44.634 44.634.0 018.547-15.237 36.428 36.428.0 0112.76-9.415 38.826 38.826.0 0130.968.0 36.484 36.484.0 0112.76 9.415 44.735 44.735.0 018.547 15.237 70.624 70.624.0 010 41.373zm81.141-80.89q-11.147 7.434-18.83 23.041h-.493v-27.005h-19.82V287.78h21.057v-56.984a87.528 87.528.0 012.478-21.924 41.993 41.993.0 017.93-16.228 33.951 33.951.0 0114.368-10.158q8.919-3.468 21.555-3.468V156.72q-17.097-.493-28.245 6.937zm80.761-42.366h-21.06v38.402h-21.8v18.581h21.8v81.51a48.668 48.668.0 001.734 14.37 17.432 17.432.0 005.326 8.423 20.57 20.57.0 009.415 4.088 75.59 75.59.0 0013.999 1.115h16.104v-18.582h-9.664a70.335 70.335.0 01-8.05-.37 10.361 10.361.0 01-4.833-1.611 6.108 6.108.0 01-2.354-3.469 23.006 23.006.0 01-.617-5.946v-79.528h25.518v-18.581h-25.518zm148.522 60.452a56.135 56.135.0 00-18.085-17.962q-11.276-7.063-28.367-7.06a58.263 58.263.0 00-24.155 4.953A56.796 56.796.0 00925.82 175.55a63.949 63.949.0 00-12.51 21.058 77.064 77.064.0 00-4.461 26.758 102.521 102.521.0 004.338 27.004 58.87 58.87.0 0011.519 21.307 52.43 52.43.0 0018.953 13.873q11.272 4.954 26.632 4.955 21.8.0 36.173-10.901 14.364-10.898 18.58-32.455h-20.81q-2.73 12.635-11.272 18.829-8.549 6.198-21.927 6.195a43.577 43.577.0 01-18.085-3.468 35.417 35.417.0 01-12.636-9.291 36.127 36.127.0 01-7.184-13.38 50.746 50.746.0 01-1.981-15.98h95.879a102.07 102.07.0 00-2.107-24.526 71.064 71.064.0 00-9.415-23.784zm-84.357 29.73a43.81 43.81.0 013.219-13.999 37.354 37.354.0 017.433-11.52 34.013 34.013.0 0111.272-7.803 36.694 36.694.0 0114.74-2.85 36.062 36.062.0 0114.494 2.85 36.492 36.492.0 0111.398 7.68 36.107 36.107.0 017.68 11.52 43.253 43.253.0 013.345 14.122zm170.95 7.184 44.1-58.964h-25.271l-31.961 44.843-30.721-44.843h-27.006l44.595 60.698-48.063 67.389h25.518l35.677-53.019 35.676 53.019h27.006l-49.55-69.123z" class="cls-1"/></svg></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://twitter.com/cortexmetrics class="nav-link active"><span class=active><i class="fab fa-fw fa-twitter"></i> Twitter</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://github.com/cortexproject class="nav-link active"><span class=active><i class="fab fa-fw fa-github"></i> GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-md-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.6209b63d3e2a9f5487902ffafab257cb.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.6209b63d3e2a9f5487902ffafab257cb.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-started-li><a href=/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsarchitecture-li><a href=/docs/architecture/ title="Cortex Architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsarchitecture><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsblocks-storage-li><a href=/docs/blocks-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsblocks-storage><span>Blocks Storage</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsblocks-storagequerier-li><a href=/docs/blocks-storage/querier/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagequerier><span class=td-sidebar-nav-active-item>Querier</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagestore-gateway-li><a href=/docs/blocks-storage/store-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagestore-gateway><span>Store-gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagecompactor-li><a href=/docs/blocks-storage/compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagecompactor><span>Compactor</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storageproduction-tips-li><a href=/docs/blocks-storage/production-tips/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageproduction-tips><span>Production tips</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagebinary-index-header-li><a href=/docs/blocks-storage/binary-index-header/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebinary-index-header><span>Binary index-header</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagebucket-index-li><a href=/docs/blocks-storage/bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebucket-index><span>Bucket Index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks-li><a href=/docs/blocks-storage/migrate-cortex-cluster-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks><span>Migrate Cortex cluster from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks-li><a href=/docs/blocks-storage/convert-long-term-storage-from-chunks-to-blocks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks><span>Convert long-term storage from chunks to blocks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus-li><a href=/docs/blocks-storage/migrate-storage-from-thanos-and-prometheus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus><span>Migrate the storage from Thanos and Prometheus</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsblocks-storagelearn-more-li><a href=/docs/blocks-storage/learn-more/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagelearn-more><span>Learn more</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconfiguration-li><a href=/docs/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsconfiguration><span>Configuration</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationconfiguration-file-li><a href=/docs/configuration/configuration-file/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationconfiguration-file><span>Configuration file</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationarguments-li><a href=/docs/configuration/arguments/ title="Cortex Arguments" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationarguments><span>Cortex Arguments Explained</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationprometheus-frontend-li><a href=/docs/configuration/prometheus-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationprometheus-frontend><span>Prometheus Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconfigurationv1guarantees-li><a href=/docs/configuration/v1guarantees/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationv1guarantees><span>v1.x Guarantees</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguides-li><a href=/docs/guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsguides><span>Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrunning-cortex-on-kubernetes-li><a href=/docs/guides/running-cortex-on-kubernetes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrunning-cortex-on-kubernetes><span>Running Cortex on Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesgetting-started-with-gossiped-ring-li><a href=/docs/guides/getting-started-with-gossiped-ring/ title="Getting started with gossiped ring" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesgetting-started-with-gossiped-ring><span>Getting started with a gossip ring cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesalertmanager-configuration-li><a href=/docs/guides/alertmanager-configuration/ title="Configuring Notification using Cortex Alertmanager" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesalertmanager-configuration><span>Alertmanager configuration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesauth-li><a href=/docs/guides/auth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesauth><span>Authentication and Authorisation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidescapacity-planning-li><a href=/docs/guides/capacity-planning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidescapacity-planning><span>Capacity Planning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesruler-sharding-li><a href=/docs/guides/ruler-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesruler-sharding><span>Config for horizontally scaling the Ruler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesha-pair-handling-li><a href=/docs/guides/ha-pair-handling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesha-pair-handling><span>Config for sending HA Pairs data to Cortex</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesencryption-at-rest-li><a href=/docs/guides/encryption-at-rest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesencryption-at-rest><span>Encryption at Rest</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-rolling-updates-li><a href=/docs/guides/ingesters-rolling-updates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-rolling-updates><span>Ingesters rolling updates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesingesters-scaling-up-and-down-li><a href=/docs/guides/ingesters-scaling-up-and-down/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-scaling-up-and-down><span>Ingesters scaling up and down</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesnative-histograms-li><a href=/docs/guides/native-histograms/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesnative-histograms><span>Native Histograms</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesopentelemetry-collector-li><a href=/docs/guides/opentelemetry-collector/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesopentelemetry-collector><span>OpenTelemetry Collector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesoverrides-exporter-li><a href=/docs/guides/overrides-exporter/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesoverrides-exporter><span>Overrides Exporter</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidespartition-compaction-li><a href=/docs/guides/partition-compaction/ title="Use Partition Compaction in Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidespartition-compaction><span>Partition Compaction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesrule-evalutions-via-query-frontend-li><a href=/docs/guides/rule-evalutions-via-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesrule-evalutions-via-query-frontend><span>Rule evaluations via query frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestls-li><a href=/docs/guides/tls/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestls><span>Securing communication between Cortex components with TLS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidessecurity-li><a href=/docs/guides/security/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidessecurity><span>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesshuffle-sharding-li><a href=/docs/guides/shuffle-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesshuffle-sharding><span>Shuffle Sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidestracing-li><a href=/docs/guides/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidestracing><span>Tracing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguideszone-aware-replication-li><a href=/docs/guides/zone-aware-replication/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguideszone-aware-replication><span>Zone Aware Replication</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesprotecting-cortex-from-heavy-queries-li><a href=/docs/guides/protecting-cortex-from-heavy-queries/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesprotecting-cortex-from-heavy-queries><span>Protecting Cortex from Heavy Queries</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguideslimitations-li><a href=/docs/guides/limitations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguideslimitations><span>Limitations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesglossary-li><a href=/docs/guides/glossary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsguidesglossary><span>Glossary</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-li><a href=/docs/api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi><span>HTTP API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><a href=/docs/operations/ title="Operating Cortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-auditor-li><a href=/docs/operations/query-auditor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-auditor><span>Query Auditor (tool)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsquery-tee-li><a href=/docs/operations/query-tee/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-tee><span>Query Tee (service)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsrequests-mirroring-to-secondary-cluster-li><a href=/docs/operations/requests-mirroring-to-secondary-cluster/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsrequests-mirroring-to-secondary-cluster><span>Requests mirroring to secondary cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsoperationsscaling-query-frontend-li><a href=/docs/operations/scaling-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsscaling-query-frontend><span>Scaling the Query Frontend</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscase-studies-li><a href=/docs/case-studies/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscase-studies><span>Case Studies</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesgojek-li><a href=/docs/case-studies/gojek/ title="How Gojek Is Leveraging Cortex to Keep Up with Its Ever-Growing Scale" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesgojek><span>Gojek</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesrewe-digital-li><a href=/docs/case-studies/rewe-digital/ title="How Cortex helped REWE digital ensure stability while scaling services during the Covid-19 pandemic" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesrewe-digital><span>REWE digital</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscase-studiesbuoyant-cloud-li><a href=/docs/case-studies/buoyant-cloud/ title="Buoyant Cloud and Cortex: Standing on the shoulders of Linkerd and Prometheus" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesbuoyant-cloud><span>Buoyant Cloud</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsproposals-li><a href=/docs/proposals/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsproposals><span>Proposals</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsauth-gateway-li><a href=/docs/proposals/auth-gateway/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsauth-gateway><span>Authentication Gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-bucket-index-li><a href=/docs/proposals/blocks-storage-bucket-index/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-bucket-index><span>Blocks storage bucket index</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblocks-storage-sharding-li><a href=/docs/proposals/blocks-storage-sharding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-sharding><span>Blocks storage sharding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalscross-tenant-query-federation-li><a href=/docs/proposals/cross-tenant-query-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalscross-tenant-query-federation><span>Cross-Tenant Query Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-deletion-li><a href=/docs/proposals/tenant-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-deletion><span>Deletion of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsdocumentation-versioning-li><a href=/docs/proposals/documentation-versioning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsdocumentation-versioning><span>Documentation Versioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsgeneralize-modules-li><a href=/docs/proposals/generalize-modules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsgeneralize-modules><span>Generalize Modules Service to make it extensible</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalshttp-api-design-li><a href=/docs/proposals/http-api-design/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalshttp-api-design><span>HTTP API Design</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsingesters-migration-li><a href=/docs/proposals/ingesters-migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsingesters-migration><span>Migrating ingesters from chunks to blocks and back.</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparallel-compaction-li><a href=/docs/proposals/parallel-compaction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparallel-compaction><span>Parallel Compaction by Time Interval</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsparquet-storage-li><a href=/docs/proposals/parquet-storage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsparquet-storage><span>Parquet-based Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstenant-retention-li><a href=/docs/proposals/tenant-retention/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstenant-retention><span>Retention of Tenant Data from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsring-multikey-li><a href=/docs/proposals/ring-multikey/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsring-multikey><span>Ring Multikey</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-ha-li><a href=/docs/proposals/ruler-ha/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-ha><span>Ruler HA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-high-availability-li><a href=/docs/proposals/ruler-high-availability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-high-availability><span>Ruler High Availability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsruler-tenant-federation-li><a href=/docs/proposals/ruler-tenant-federation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsruler-tenant-federation><span>Ruler Tenant Federation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-alertmanager-li><a href=/docs/proposals/scalable-alertmanager/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-alertmanager><span>Scalable Alertmanager</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsscalable-query-frontend-li><a href=/docs/proposals/scalable-query-frontend/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-query-frontend><span>Scalable Query Frontend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-and-zone-awareness-li><a href=/docs/proposals/shuffle-sharding-and-zone-awareness/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-and-zone-awareness><span>Shuffle sharding and zone awareness</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsshuffle-sharding-on-the-read-path-li><a href=/docs/proposals/shuffle-sharding-on-the-read-path/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-on-the-read-path><span>Shuffle sharding on the read path</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalssupport-metadata-api-li><a href=/docs/proposals/support-metadata-api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalssupport-metadata-api><span>Support metadata API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalsblock-storage-time-series-deletion-li><a href=/docs/proposals/block-storage-time-series-deletion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblock-storage-time-series-deletion><span>Time Series Deletion from Blocks Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsproposalstimeseries-partitioning-in-compactor-li><a href=/docs/proposals/timeseries-partitioning-in-compactor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsproposalstimeseries-partitioning-in-compactor><span>Timeseries Partitioning in Compactor</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontributing-li><a href=/docs/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontributing><span>Contributing</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinggovernance-li><a href=/docs/contributing/governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinggovernance><span>Governance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributingdesign-patterns-and-code-conventions-li><a href=/docs/contributing/design-patterns-and-code-conventions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributingdesign-patterns-and-code-conventions><span>Design patterns and Code conventions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-run-the-website-locally-li><a href=/docs/contributing/how-to-run-the-website-locally/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-run-the-website-locally><span>How to run the website locally</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-upgrade-golang-version-li><a href=/docs/contributing/how-to-upgrade-golang-version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-upgrade-golang-version><span>How to upgrade Golang version</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-integration-tests-work-li><a href=/docs/contributing/how-integration-tests-work/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-integration-tests-work><span>How integration tests work</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-update-the-build-image-li><a href=/docs/contributing/how-to-update-the-build-image/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-update-the-build-image><span>How to update the build image</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontributinghow-to-add-a-maintainer-li><a href=/docs/contributing/how-to-add-a-maintainer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-add-a-maintainer><span>How to add a maintainer</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsroadmap-li><a href=/docs/roadmap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsroadmap><span>Roadmap</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docschangelog-li><a href=/docs/changelog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docschangelog><span>Changelog</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscode-of-conduct-li><a href=/docs/code-of-conduct/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscode-of-conduct><span>Code of Conduct</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cortexproject/cortex/edit/master/docs/blocks-storage/querier.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cortexproject/cortex/issues/new?title=Querier" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cortexproject/cortex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#how-it-works>How it works</a><ul><li><a href=#bucket-index-disabled-default>Bucket index disabled (default)</a></li><li><a href=#bucket-index-enabled>Bucket index enabled</a></li><li><a href=#anatomy-of-a-query-request>Anatomy of a query request</a></li><li><a href=#how-queriers-connect-to-store-gateway>How queriers connect to store-gateway</a></li></ul></li><li><a href=#caching>Caching</a><ul><li><a href=#metadata-cache>Metadata cache</a></li></ul></li><li><a href=#querier-configuration>Querier configuration</a><ul><li><a href=#querier_config><code>querier_config</code></a></li><li><a href=#blocks_storage_config><code>blocks_storage_config</code></a></li></ul></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-projects"><h5 class=taxonomy-title>Our Projects</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/projects/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/blog/ data-taxonomy-term=blog><span class=taxonomy-label>blog</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/community/ data-taxonomy-term=community><span class=taxonomy-label>community</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/cortex/ data-taxonomy-term=cortex><span class=taxonomy-label>cortex</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/tags/updates/ data-taxonomy-term=updates><span class=taxonomy-label>updates</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/blocks-storage/>Blocks Storage</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/blocks-storage/querier/ aria-disabled=true class="btn-link disabled">Querier</a></li></ol></nav><div class=td-content><h1>Querier</h1><header class=article-meta></header><p>The <strong>querier</strong> service handles queries using the <a href=https://prometheus.io/docs/prometheus/latest/querying/basics/>PromQL</a> query language. This document dives into the storage-specific details of the querier service. The <a href=/docs/architecture/#querier>general architecture documentation</a> applies too.</p><p>The querier is <strong>stateless</strong>.</p><h2 id=how-it-works>How it works</h2><p>The querier needs to have an almost up-to-date view over the entire storage bucket, in order to find the right blocks to lookup at query time. The querier can keep the bucket view updated in to two different ways:</p><ol><li>Periodically scanning the bucket (default)</li><li>Periodically downloading the <a href=/docs/blocks-storage/bucket-index/>bucket index</a></li></ol><h3 id=bucket-index-disabled-default>Bucket index disabled (default)</h3><p>At startup, <strong>queriers</strong> iterate over the entire storage bucket to discover all tenants blocks and download the <code>meta.json</code> for each block. During this initial bucket scanning phase, a querier is not ready to handle incoming queries yet and its <code>/ready</code> readiness probe endpoint will fail.</p><p>While running, queriers periodically iterate over the storage bucket to discover new tenants and recently uploaded blocks. Queriers do <strong>not</strong> download any content from blocks except a small <code>meta.json</code> file containing the block&rsquo;s metadata (including the minimum and maximum timestamp of samples within the block).</p><p>Queriers use the metadata to compute the list of blocks that need to be queried at query time and fetch matching series from the <a href=/docs/blocks-storage/store-gateway/>store-gateway</a> instances holding the required blocks.</p><h3 id=bucket-index-enabled>Bucket index enabled</h3><p>When <a href=/docs/blocks-storage/bucket-index/>bucket index</a> is enabled, queriers lazily download the bucket index upon the first query received for a given tenant, cache it in memory and periodically keep it update. The bucket index contains the list of blocks and block deletion marks of a tenant, which is later used during the query execution to find the set of blocks that need to be queried for the given query.</p><p>Given the bucket index removes the need to scan the bucket, it brings few benefits:</p><ol><li>The querier is expected to be ready shortly after startup.</li><li>Lower volume of API calls to object storage.</li></ol><h3 id=anatomy-of-a-query-request>Anatomy of a query request</h3><p>When a querier receives a query range request, it contains the following parameters:</p><ul><li><code>query</code>: the PromQL query expression itself (e.g. <code>rate(node_cpu_seconds_total[1m])</code>)</li><li><code>start</code>: the start time</li><li><code>end</code>: the end time</li><li><code>step</code>: the query resolution (e.g. <code>30</code> to have 1 resulting data point every 30s)</li></ul><p>Given a query, the querier analyzes the <code>start</code> and <code>end</code> time range to compute a list of all known blocks containing at least 1 sample within this time range. Given the list of blocks, the querier then computes a list of store-gateway instances holding these blocks and sends a request to each matching store-gateway instance asking to fetch all the samples for the series matching the <code>query</code> within the <code>start</code> and <code>end</code> time range.</p><p>The request sent to each store-gateway contains the list of block IDs that are expected to be queried, and the response sent back by the store-gateway to the querier contains the list of block IDs that were actually queried. This list may be a subset of the requested blocks, for example due to recent blocks resharding event (ie. last few seconds). The querier runs a consistency check on responses received from the store-gateways to ensure all expected blocks have been queried; if not, the querier retries to fetch samples from missing blocks from different store-gateways (if the <code>-store-gateway.sharding-ring.replication-factor</code> is greater than <code>1</code>) and if the consistency check fails after all retries, the query execution fails as well (correctness is always guaranteed).</p><p>If the query time range covers a period within <code>-querier.query-ingesters-within</code> duration, the querier also sends the request to all ingesters, in order to fetch samples that have not been uploaded to the long-term storage yet.</p><p>Once all samples have been fetched from both store-gateways and ingesters, the querier proceeds with running the PromQL engine to execute the query and send back the result to the client.</p><h3 id=how-queriers-connect-to-store-gateway>How queriers connect to store-gateway</h3><p>Queriers need to discover store-gateways in order to connect to them at query time. The service discovery mechanism used depends whether blocks sharding is enabled in the store-gateways.</p><p>When blocks sharding is <strong>enabled</strong>, queriers need to access to the store-gateways hash ring and thus queriers need to be configured with the same <code>-store-gateway.sharding-ring.*</code> flags (or their respective YAML config options) store-gateways have been configured.</p><p>When blocks sharding is <strong>disabled</strong>, queriers need the <code>-querier.store-gateway-addresses</code> CLI flag (or its respective YAML config option) being set to a comma separated list of store-gateway addresses in <a href=/docs/configuration/arguments/#dns-service-discovery>DNS Service Discovery format</a>. Queriers will evenly balance the requests to query blocks across the resolved addresses.</p><h2 id=caching>Caching</h2><p>The querier supports the following caches:</p><ul><li><a href=#metadata-cache>Metadata cache</a></li></ul><p>Caching is optional, but <strong>highly recommended</strong> in a production environment. Please also check out the <a href=/docs/blocks-storage/production-tips/#caching>production tips</a> for more information about configuring the cache.</p><h3 id=metadata-cache>Metadata cache</h3><p><a href=/docs/blocks-storage/store-gateway/>Store-gateway</a> and querier can use memcached for caching bucket metadata:</p><ul><li>List of tenants</li><li>List of blocks per tenant</li><li>Block&rsquo;s <code>meta.json</code> content</li><li>Block&rsquo;s <code>deletion-mark.json</code> existence and content</li><li>Tenant&rsquo;s <code>bucket-index.json.gz</code> content</li></ul><p>Using the metadata cache can significantly reduce the number of API calls to object storage and protects from linearly scale the number of these API calls with the number of querier and store-gateway instances (because the bucket is periodically scanned and synched by each querier and store-gateway).</p><p>To enable metadata cache, please set <code>-blocks-storage.bucket-store.metadata-cache.backend</code>. Only <code>memcached</code> backend is supported currently. Memcached client has additional configuration available via flags with <code>-blocks-storage.bucket-store.metadata-cache.memcached.*</code> prefix.</p><p>Additional options for configuring metadata cache have <code>-blocks-storage.bucket-store.metadata-cache.*</code> prefix. By configuring TTL to zero or negative value, caching of given item type is disabled.</p><p><em>The same memcached backend cluster should be shared between store-gateways and queriers.</em></p><h2 id=querier-configuration>Querier configuration</h2><p>This section described the querier configuration. For the general Cortex configuration and references to common config blocks, please refer to the <a href=/docs/configuration/configuration-file/>configuration documentation</a>.</p><h3 id=querier_config><code>querier_config</code></h3><p>The <code>querier_config</code> configures the Cortex querier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>querier</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># The maximum number of concurrent queries.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.max-concurrent</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[max_concurrent</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 20]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># The timeout for a query.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.timeout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 2m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Deprecated (This feature will be always on after v1.18): Use streaming RPCs</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># for metadata APIs from ingester.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.ingester-metadata-streaming</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[ingester_metadata_streaming</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = true]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Use LabelNames ingester RPCs with match params.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.ingester-label-names-with-matchers</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[ingester_label_names_with_matchers</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Maximum number of samples a single query can load into memory.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.max-samples</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[max_samples</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50000000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Maximum lookback beyond which queries are not sent to ingester. 0 means all</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># queries are sent to ingester.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.query-ingesters-within</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[query_ingesters_within</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Enable returning samples stats per steps in query response.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.per-step-stats-enabled</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[per_step_stats_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Use compression for metrics query API or instant and range query APIs.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Supports &#39;gzip&#39; and &#39;&#39; (disable compression)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.response-compression</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[response_compression</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;gzip&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># The time after which a metric should be queried from storage and not just</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># ingesters. 0 means all queries are sent to store. When running the blocks</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># storage, if this option is enabled, the time range of the query sent to the</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># store will be manipulated to ensure the query end is not more recent than</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># &#39;now - query-store-after&#39;.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.query-store-after</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[query_store_after</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Maximum duration into the future you can query. 0 to disable.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.max-query-into-future</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[max_query_into_future</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># The default evaluation interval or step size for subqueries.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.default-evaluation-interval</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[default_evaluation_interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Max number of steps allowed for every subquery expression in query. Number</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># of steps is calculated using subquery range / step. A value &gt; 0 enables it.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.max-subquery-steps</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[max_subquery_steps</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Active query tracker monitors active queries, and writes them to the file in</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># given directory. If Cortex discovers any queries in this log during startup,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># it will log them to the log file. Setting to empty value disables active</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># query tracker, which also disables -querier.max-concurrent option.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.active-query-tracker-dir</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[active_query_tracker_dir</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;./active-query-tracker&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Time since the last sample after which a time series is considered stale and</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># ignored by expression evaluations.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.lookback-delta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[lookback_delta</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Comma separated list of store-gateway addresses in DNS Service Discovery</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># format. This option should be set when using the blocks storage and the</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># store-gateway sharding is disabled (when enabled, the store-gateway</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># instances form a ring and addresses are picked from the ring).</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.store-gateway-addresses</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[store_gateway_addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>store_gateway_client</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Enable TLS for gRPC client connecting to store-gateway.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-enabled</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Path to the client certificate file, which will be used for authenticating</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># with the server. Also requires the key path to be configured.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-cert-path</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_cert_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Path to the key file for the client certificate. Also requires the client</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># certificate to be configured.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-key-path</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_key_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Path to the CA certificates file to validate server certificate against.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If not set, the host&#39;s root CA certificates are used.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-ca-path</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_ca_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Override the expected name on the server certificate.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-server-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_server_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Skip validating server certificate.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.tls-insecure-skip-verify</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tls_insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Use compression when sending messages. Supported values are: &#39;gzip&#39;,</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># &#39;snappy&#39; and &#39;&#39; (disable compression)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.grpc-compression</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[grpc_compression</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># EXPERIMENTAL: If enabled, gRPC clients perform health checks for each</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># target and fail the request if the target is marked as unhealthy.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>healthcheck_config</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># The number of consecutive failed health checks required before</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># considering a target unhealthy. 0 means disabled.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -querier.store-gateway-client.healthcheck.unhealthy-threshold</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[unhealthy_threshold</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The approximate amount of time between health checks of an individual</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># target.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -querier.store-gateway-client.healthcheck.interval</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The amount of time during which no response from a target means a failed</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># health check.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -querier.store-gateway-client.healthcheck.timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The maximum amount of time to establish a connection. A value of 0 means</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># using default gRPC client connect timeout 5s.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -querier.store-gateway-client.connect-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[connect_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># If enabled, store gateway query stats will be logged using `info` log level.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.store-gateway-query-stats-enabled</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[store_gateway_query_stats</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = true]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># The maximum number of times we attempt fetching missing blocks from</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># different store-gateways. If no more store-gateways are left (ie. due to</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># lower replication factor) than we&#39;ll end the retries earlier</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.store-gateway-consistency-check-max-attempts</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[store_gateway_consistency_check_max_attempts</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># The maximum number of times we attempt fetching data from ingesters for</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># retryable errors (ex. partial data returned).</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.ingester-query-max-attempts</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[ingester_query_max_attempts</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># When distributor&#39;s sharding strategy is shuffle-sharding and this setting is</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># &gt; 0, queriers fetch in-memory series from the minimum set of required</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># ingesters, selecting only ingesters which may have received series since</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># &#39;now - lookback period&#39;. The lookback period should be greater or equal than</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># the configured &#39;query store after&#39; and &#39;query ingesters within&#39;. If this</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># setting is 0, queriers always query all ingesters (ingesters shuffle</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># sharding on read path is disabled).</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.shuffle-sharding-ingesters-lookback-period</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[shuffle_sharding_ingesters_lookback_period</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Experimental. Use Thanos promql engine</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># https://github.com/thanos-io/promql-engine rather than the Prometheus promql</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># engine.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.thanos-engine</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[thanos_engine</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># If enabled, ignore max query length check at Querier select method. Users</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># can choose to ignore it since the validation can be done before Querier</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># evaluation like at Query Frontend or Ruler.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.ignore-max-query-length</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[ignore_max_query_length</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># [Experimental] If true, experimental promQL functions are enabled.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -querier.enable-promql-experimental-functions</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[enable_promql_experimental_functions</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span></code></pre></div><h3 id=blocks_storage_config><code>blocks_storage_config</code></h3><p>The <code>blocks_storage_config</code> configures the blocks storage.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>blocks_storage</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># Backend storage to use. Supported backends are: s3, gcs, azure, swift,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># filesystem.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CLI flag: -blocks-storage.backend</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>[backend</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;s3&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>s3</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># The S3 bucket endpoint. It could be an AWS S3 endpoint listed at</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># https://docs.aws.amazon.com/general/latest/gr/s3.html or the address of an</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3-compatible service in hostname:port format.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.endpoint</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[endpoint</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3 region. If unset, the client will issue a S3 GetBucketLocation API call</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># to autodetect it.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.region</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[region</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3 bucket name</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.bucket-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[bucket_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If enabled, S3 endpoint will use the non-dualstack variant.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.disable-dualstack</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[disable_dualstack</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3 secret access key</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.secret-access-key</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[secret_access_key</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3 access key ID</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.access-key-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[access_key_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If enabled, use http:// for the S3 endpoint instead of https://. This</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># could be useful in local dev/test environments while using an</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># S3-compatible backend storage, like Minio.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.insecure</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[insecure</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The signature version to use for authenticating against S3. Supported</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># values are: v4, v2.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.signature-version</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[signature_version</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;v4&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The s3 bucket lookup style. Supported values are: auto, virtual-hosted,</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># path.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.bucket-lookup-type</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[bucket_lookup_type</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;auto&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If true, attach MD5 checksum when upload objects and S3 uses MD5 checksum</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># algorithm to verify the provided digest. If false, use CRC32C algorithm</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># instead.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.send-content-md5</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[send_content_md5</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = true]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The list api version. Supported values are: v1, v2, and &#39;&#39;.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.s3.list-objects-version</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[list_objects_version</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The s3_sse_config configures the S3 server-side encryption.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The CLI flags prefix for this block config is: blocks-storage</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[sse</span>: <span style=color:#ae81ff>&lt;s3_sse_config&gt;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># The time an idle connection will remain idle before closing.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.http.idle-conn-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[idle_conn_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m30s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The amount of time the client will wait for a servers response headers.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.http.response-header-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[response_header_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 2m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># If the client connects via HTTPS and this option is enabled, the client</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># will accept any certificate and hostname.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.http.insecure-skip-verify</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum time to wait for a TLS handshake. 0 means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.tls-handshake-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[tls_handshake_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The time to wait for a server&#39;s first response headers after fully</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># writing the request headers if the request has an Expect header. 0 to</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># send the request body immediately.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.expect-continue-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[expect_continue_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of idle (keep-alive) connections across all hosts. 0</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.max-idle-connections</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_idle_connections</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of idle (keep-alive) connections to keep per-host. If 0,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># a built-in default value is used.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.max-idle-connections-per-host</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_idle_connections_per_host</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of connections per host. 0 means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.s3.max-connections-per-host</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_connections_per_host</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>gcs</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># GCS bucket name</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.gcs.bucket-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[bucket_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># JSON representing either a Google Developers Console</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># client_credentials.json file or a Google Developers service account key</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># file. If empty, fallback to Google default logic.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.gcs.service-account</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[service_account</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>azure</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure storage account name</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.account-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[account_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure storage account key</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.account-key</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[account_key</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The values of `account-name` and `endpoint-suffix` values will not be</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ignored if `connection-string` is set. Use this method over `account-key`</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># if you need to authenticate via a SAS token or if you use the Azurite</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># emulator.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.connection-string</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[connection_string</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure storage container name</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.container-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[container_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure storage endpoint suffix without schema. The account name will be</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># prefixed to this value to create the FQDN</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.endpoint-suffix</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[endpoint_suffix</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Number of retries for recoverable errors</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.max-retries</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_retries</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 20]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Deprecated: Azure storage MSI resource. It will be set automatically by</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure SDK.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.msi-resource</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[msi_resource</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Azure storage MSI resource managed identity client Id. If not supplied</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># default Azure credential will be used. Set it to empty if you need to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># authenticate via Azure Workload Identity.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.azure.user-assigned-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[user_assigned_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># The time an idle connection will remain idle before closing.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.http.idle-conn-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[idle_conn_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m30s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The amount of time the client will wait for a servers response headers.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.http.response-header-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[response_header_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 2m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># If the client connects via HTTPS and this option is enabled, the client</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># will accept any certificate and hostname.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.http.insecure-skip-verify</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum time to wait for a TLS handshake. 0 means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.tls-handshake-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[tls_handshake_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The time to wait for a server&#39;s first response headers after fully</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># writing the request headers if the request has an Expect header. 0 to</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># send the request body immediately.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.expect-continue-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[expect_continue_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of idle (keep-alive) connections across all hosts. 0</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.max-idle-connections</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_idle_connections</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of idle (keep-alive) connections to keep per-host. If 0,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># a built-in default value is used.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.max-idle-connections-per-host</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_idle_connections_per_host</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of connections per host. 0 means no limit.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.azure.max-connections-per-host</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_connections_per_host</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>swift</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift authentication API version. 0 to autodetect.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.auth-version</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[auth_version</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift authentication URL</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.auth-url</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[auth_url</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift application credential ID.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.application-credential-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[application_credential_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift application credential name.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.application-credential-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[application_credential_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift application credential secret.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.application-credential-secret</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[application_credential_secret</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift username.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.username</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[username</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift user&#39;s domain name.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.user-domain-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[user_domain_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift user&#39;s domain ID.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.user-domain-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[user_domain_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift user ID.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.user-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[user_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift API key.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.password</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[password</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift user&#39;s domain ID.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.domain-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[domain_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift user&#39;s domain name.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.domain-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[domain_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift project ID (v2,v3 auth only).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.project-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[project_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift project name (v2,v3 auth only).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.project-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[project_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ID of the OpenStack Swift project&#39;s domain (v3 auth only), only needed if</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># it differs the from user domain.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.project-domain-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[project_domain_id</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Name of the OpenStack Swift project&#39;s domain (v3 auth only), only needed</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># if it differs from the user domain.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.project-domain-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[project_domain_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># OpenStack Swift Region to use (v2,v3 auth only).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.region-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[region_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Name of the OpenStack Swift container to put chunks in.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.container-name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[container_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Max retries on requests error.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.max-retries</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_retries</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Time after which a connection attempt is aborted.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.connect-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[connect_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Time after which an idle request is aborted. The timeout watchdog is reset</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># each time some data is received, so the timeout triggers after X time no</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># data is received on a request.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.swift.request-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[request_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>filesystem</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Local filesystem storage directory.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.filesystem.dir</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[dir</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># This configures how the querier and store-gateway discover and synchronize</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># blocks stored in the bucket.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>bucket_store</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Directory to store synchronized TSDB index headers.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.sync-dir</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[sync_dir</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;tsdb-sync&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># How frequently to scan the bucket, or to refresh the bucket index (if</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># enabled), in order to look for changes (new blocks shipped by ingesters</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># and blocks deleted by retention or compaction).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.sync-interval</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[sync_interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 15m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Max number of concurrent queries to execute against the long-term storage.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The limit is shared across all tenants.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.max-concurrent</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_concurrent</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Max number of inflight queries to execute against the long-term storage.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The limit is shared across all tenants. 0 to disable.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.max-inflight-requests</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_inflight_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Maximum number of concurrent tenants syncing blocks.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.tenant-sync-concurrency</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[tenant_sync_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Maximum number of concurrent blocks syncing per tenant.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.block-sync-concurrency</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[block_sync_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 20]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Number of Go routines to use when syncing block meta files from object</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># storage per tenant.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.meta-sync-concurrency</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[meta_sync_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 20]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Minimum age of a block before it&#39;s being read. Set it to safe value (e.g</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 30m) if your object storage is eventually consistent. GCS and S3 are</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># (roughly) strongly consistent.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.consistency-delay</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[consistency_delay</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>index_cache</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># The index cache backend type. Multiple cache backend can be provided as</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># a comma-separated ordered list to enable the implementation of a cache</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># hierarchy. Supported values: inmemory, memcached, redis.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.backend</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[backend</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;inmemory&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>inmemory</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Maximum size in bytes of in-memory index cache used to speed up blocks</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># index lookups (shared between all tenants).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.inmemory.max-size-bytes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1073741824]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Selectively cache index item types. Supported values are Postings,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># ExpandedPostings and Series</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.inmemory.enabled-items</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[enabled_items</span>: <span style=color:#ae81ff>&lt;list of string&gt; | default = []]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>memcached</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of memcached addresses. Supported prefixes are:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dns+ (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># query, dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># made after that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The socket read/write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 100ms]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of idle connections that will be maintained per</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># address.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-idle-connections</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_idle_connections</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 16]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent connections running get operations.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If set to 0, concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of keys a single underlying get operation should</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># run. If more keys are specified, internally keys are split into</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># multiple batches and fetched concurrently, honoring the max</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency. If set to 0, the max batch size is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size of an item stored in memcached. Bigger items are not</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># stored. If set to 0, no maximum size is enforced.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.max-item-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_item_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1048576]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Use memcached auto-discovery mechanism provided by some cloud provider</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># like GCP and AWS</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.auto-discovery</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[auto_discovery</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Selectively cache index item types. Supported values are Postings,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># ExpandedPostings and Series</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.memcached.enabled-items</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[enabled_items</span>: <span style=color:#ae81ff>&lt;list of string&gt; | default = []]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of redis addresses. Supported prefixes are: dns+</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV query,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup made after</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis username.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.username</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[username</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis password.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.password</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[password</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Database to be selected after connecting to the server.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.db</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[db</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Specifies the master&#39;s name. Must be not empty for Redis Sentinel.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.master-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[master_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent GetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for mget.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent SetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.max-set-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_set_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for pipeline set.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[set_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client dial timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.dial-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[dial_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client read timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.read-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[read_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.write-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[write_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Whether to enable tls for redis connection.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-enabled</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the client certificate file, which will be used for</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># authenticating with the server. Also requires the key path to be</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-cert-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_cert_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the key file for the client certificate. Also requires the</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># client certificate to be configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-key-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_key_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the CA certificates file to validate server certificate</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># against. If not set, the host&#39;s root CA certificates are used.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-ca-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_ca_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Override the expected name on the server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-server-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_server_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Skip validating server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.tls-insecure-skip-verify</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If not zero then client-side caching is enabled. Client-side caching</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># is when data is stored in memory instead of fetching data each time.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># See https://redis.io/docs/manual/client-side-caching/ for more info.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.cache-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[cache_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Selectively cache index item types. Supported values are Postings,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># ExpandedPostings and Series</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.redis.enabled-items</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[enabled_items</span>: <span style=color:#ae81ff>&lt;list of string&gt; | default = []]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>multilevel</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># when backfilling cache items.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.multilevel.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed when</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># backfilling cache items.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.multilevel.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of items to backfill per asynchronous operation.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-cache.multilevel.max-backfill-items</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_backfill_items</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>chunks_cache</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># The chunks cache backend type. Single or Multiple cache backend can be</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># provided. Supported values in single cache: memcached, redis, inmemory,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># and &#39;&#39; (disable). Supported values in multi level cache: a</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># comma-separated list of (inmemory, memcached, redis)</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.backend</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[backend</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>inmemory</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Maximum size in bytes of in-memory chunk cache used to speed up chunk</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># lookups (shared between all tenants).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.inmemory.max-size-bytes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1073741824]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>memcached</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of memcached addresses. Supported prefixes are:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dns+ (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># query, dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># made after that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The socket read/write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 100ms]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of idle connections that will be maintained per</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># address.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-idle-connections</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_idle_connections</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 16]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent connections running get operations.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If set to 0, concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of keys a single underlying get operation should</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># run. If more keys are specified, internally keys are split into</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># multiple batches and fetched concurrently, honoring the max</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency. If set to 0, the max batch size is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size of an item stored in memcached. Bigger items are not</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># stored. If set to 0, no maximum size is enforced.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.max-item-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_item_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1048576]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Use memcached auto-discovery mechanism provided by some cloud provider</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># like GCP and AWS</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.auto-discovery</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[auto_discovery</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.memcached.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of redis addresses. Supported prefixes are: dns+</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV query,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup made after</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis username.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.username</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[username</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis password.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.password</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[password</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Database to be selected after connecting to the server.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.db</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[db</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Specifies the master&#39;s name. Must be not empty for Redis Sentinel.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.master-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[master_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent GetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for mget.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent SetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.max-set-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_set_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for pipeline set.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[set_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client dial timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.dial-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[dial_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client read timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.read-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[read_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.write-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[write_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Whether to enable tls for redis connection.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-enabled</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the client certificate file, which will be used for</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># authenticating with the server. Also requires the key path to be</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-cert-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_cert_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the key file for the client certificate. Also requires the</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># client certificate to be configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-key-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_key_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the CA certificates file to validate server certificate</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># against. If not set, the host&#39;s root CA certificates are used.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-ca-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_ca_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Override the expected name on the server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-server-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_server_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Skip validating server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.tls-insecure-skip-verify</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If not zero then client-side caching is enabled. Client-side caching</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># is when data is stored in memory instead of fetching data each time.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># See https://redis.io/docs/manual/client-side-caching/ for more info.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.cache-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[cache_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.redis.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>multilevel</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># when backfilling cache items.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.multilevel.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed when</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># backfilling cache items.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.multilevel.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of items to backfill per asynchronous operation.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.multilevel.max-backfill-items</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_backfill_items</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Size of each subrange that bucket object is split into for better</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># caching.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.subrange-size</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[subrange_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 16000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum number of sub-GetRange requests that a single GetRange request</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># can be split into when fetching chunks. Zero or negative value =</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># unlimited number of sub-requests.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.max-get-range-requests</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_get_range_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># TTL for caching object attributes for chunks.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.attributes-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[attributes_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 168h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># TTL for caching individual chunks subranges.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.chunks-cache.subrange-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[subrange_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 24h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata_cache</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># Backend for metadata cache, if not empty. Supported values: memcached,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># redis, and &#39;&#39; (disable).</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.backend</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[backend</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>memcached</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of memcached addresses. Supported prefixes are:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dns+ (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># query, dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># made after that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The socket read/write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 100ms]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of idle connections that will be maintained per</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># address.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-idle-connections</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_idle_connections</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 16]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent connections running get operations.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If set to 0, concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of keys a single underlying get operation should</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># run. If more keys are specified, internally keys are split into</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># multiple batches and fetched concurrently, honoring the max</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency. If set to 0, the max batch size is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size of an item stored in memcached. Bigger items are not</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># stored. If set to 0, no maximum size is enforced.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.max-item-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_item_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1048576]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Use memcached auto-discovery mechanism provided by some cloud provider</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># like GCP and AWS</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.auto-discovery</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[auto_discovery</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.memcached.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Comma separated list of redis addresses. Supported prefixes are: dns+</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># (looked up as an A/AAAA query), dnssrv+ (looked up as a SRV query,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># dnssrvnoa+ (looked up as a SRV query, with no A/AAAA lookup made after</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># that).</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.addresses</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[addresses</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis username.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.username</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[username</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Redis password.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.password</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[password</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Database to be selected after connecting to the server.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.db</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[db</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Specifies the master&#39;s name. Must be not empty for Redis Sentinel.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.master-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[master_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent GetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.max-get-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_get_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for mget.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.get-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[get_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent SetMulti() operations. If set to 0,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># concurrency is unlimited.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.max-set-multi-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_set_multi_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum size per batch for pipeline set.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-multi-batch-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[set_multi_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of concurrent asynchronous operations can occur.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.max-async-concurrency</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 3]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># The maximum number of enqueued asynchronous operations allowed.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.max-async-buffer-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_async_buffer_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client dial timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.dial-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[dial_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client read timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.read-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[read_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Client write timeout.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.write-timeout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[write_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 3s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Whether to enable tls for redis connection.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-enabled</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the client certificate file, which will be used for</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># authenticating with the server. Also requires the key path to be</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-cert-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_cert_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the key file for the client certificate. Also requires the</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># client certificate to be configured.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-key-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_key_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Path to the CA certificates file to validate server certificate</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># against. If not set, the host&#39;s root CA certificates are used.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-ca-path</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_ca_path</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Override the expected name on the server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-server-name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_server_name</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Skip validating server certificate.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.tls-insecure-skip-verify</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[tls_insecure_skip_verify</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If not zero then client-side caching is enabled. Client-side caching</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># is when data is stored in memory instead of fetching data each time.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># See https://redis.io/docs/manual/client-side-caching/ for more info.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.cache-size</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[cache_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>set_async_circuit_breaker_config</span>:
</span></span><span style=display:flex><span>          <span style=color:#75715e># If true, enable circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.enabled</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Maximum number of requests allowed to pass through when the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker is half-open. If set to 0, by default it allows 1 request.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.half-open-max-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[half_open_max_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Period of the open state after which the state of the circuit</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># breaker becomes half-open. If set to 0, by default open duration is</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># 60 seconds.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.open-duration</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[open_duration</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Minimal requests to trigger the circuit breaker.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.min-requests</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[min_requests</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 50]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Consecutive failures to determine if the circuit breaker should</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.consecutive-failures</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[consecutive_failures</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># Failure percentage to determine if the circuit breaker should open.</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.redis.set-async.circuit-breaker.failure-percent</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>[failure_percent</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 0.05]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache list of tenants in the bucket.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.tenants-list-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[tenants_list_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 15m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache list of blocks for each tenant.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.tenant-blocks-list-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[tenant_blocks_list_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache list of chunks for a block.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.chunks-list-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[chunks_list_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 24h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache information that block metafile exists. Also used for</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># user deletion mark file.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.metafile-exists-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[metafile_exists_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 2h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache information that block metafile doesn&#39;t exist. Also</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># used for user deletion mark file.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.metafile-doesnt-exist-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[metafile_doesnt_exist_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache content of the metafile.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.metafile-content-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[metafile_content_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 24h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum size of metafile content to cache in bytes. Caching will be</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># skipped if the content exceeds this size. This is useful to avoid</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># network round trip for large content if the configured caching backend</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># has an hard limit on cached items size (in this case, you should set</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># this limit to the same limit in the caching backend).</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.metafile-max-size-bytes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[metafile_max_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1048576]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache attributes of the block metafile.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.metafile-attributes-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[metafile_attributes_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 168h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache attributes of the block index.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.block-index-attributes-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[block_index_attributes_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 168h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long to cache content of the bucket index.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.bucket-index-content-ttl</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[bucket_index_content_ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 5m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum size of bucket index content to cache in bytes. Caching will be</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># skipped if the content exceeds this size. This is useful to avoid</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># network round trip for large content if the configured caching backend</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># has an hard limit on cached items size (in this case, you should set</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># this limit to the same limit in the caching backend).</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.metadata-cache.bucket-index-max-size-bytes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[bucket_index_max_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 1048576]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Maximum number of entries in the regex matchers cache. 0 to disable.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.matchers-cache-max-items</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[matchers_cache_max_items</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Duration after which the blocks marked for deletion will be filtered out</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># while fetching blocks. The idea of ignore-deletion-marks-delay is to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ignore blocks that are marked for deletion with some delay. This ensures</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># store can still serve blocks that are meant to be deleted but do not have</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># a replacement yet. Default is 6h, half of the default value for</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># -compactor.deletion-delay.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.ignore-deletion-marks-delay</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[ignore_deletion_mark_delay</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 6h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The blocks created since `now() - ignore_blocks_within` will not be</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># synced. This should be used together with `-querier.query-store-after` to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># filter out the blocks that are too new to be queried. A reasonable value</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># for this flag would be `-querier.query-store-after -</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># blocks-storage.bucket-store.bucket-index.max-stale-period` to give some</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># buffer. 0 to disable.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.ignore-blocks-within</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[ignore_blocks_within</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>bucket_index</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># True to enable querier and store-gateway to discover blocks in the</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># storage via bucket index instead of bucket scanning.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.bucket-index.enabled</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How frequently a bucket index, which previously failed to load, should</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># be tried to load again. This option is used only by querier.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.bucket-index.update-on-error-interval</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[update_on_error_interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># How long a unused bucket index should be cached. Once this timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># expires, the unused bucket index is removed from the in-memory cache.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># This option is used only by querier.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.bucket-index.idle-timeout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[idle_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># The maximum allowed age of a bucket index (last updated) before queries</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># start failing because the bucket index is too old. The bucket index is</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># periodically updated by the compactor, while this check is enforced in</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># the querier (at query time).</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.bucket-index.max-stale-period</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[max_stale_period</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># One of concurrent, recursive, bucket_index. When set to concurrent, stores</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># will concurrently issue one call per directory to discover active blocks</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># in the bucket. The recursive strategy iterates through all objects in the</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># bucket, recursively traversing into each directory. This avoids N+1 calls</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># at the expense of having slower bucket iterations. bucket_index strategy</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># can be used in Compactor only and utilizes the existing bucket index to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># fetch block IDs to sync. This avoids iterating the bucket but can be</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># impacted by delays of cleaner creating bucket index.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.block-discovery-strategy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[block_discovery_strategy</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;concurrent&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Max size - in bytes - of a chunks pool, used to reduce memory allocations.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The pool is shared across all tenants. 0 to disable the limit.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.max-chunk-pool-bytes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_chunk_pool_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 2147483648]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If enabled, store-gateway will lazily memory-map an index-header only once</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># required by a query.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-header-lazy-loading-enabled</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[index_header_lazy_loading_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If index-header lazy loading is enabled and this setting is &gt; 0, the</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># store-gateway will release memory-mapped index-headers after &#39;idle</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># timeout&#39; inactivity.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.index-header-lazy-loading-idle-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[index_header_lazy_loading_idle_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 20m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If true, Store Gateway will estimate postings size and try to lazily</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># expand postings if it downloads less data than expanding all postings.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.lazy-expanded-postings-enabled</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[lazy_expanded_postings_enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mark posting group as lazy if it fetches more keys than R * max series the</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># query should fetch. With R set to 100, a posting group which fetches 100K</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># keys will be marked as lazy if the current query only fetches 1000 series.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># This config is only valid if lazy expanded posting is enabled. 0 disables</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># the limit.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.lazy-expanded-posting-group-max-key-series-ratio</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[lazy_expanded_posting_group_max_key_series_ratio</span>: <span style=color:#ae81ff>&lt;float&gt; | default = 100]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Controls how many series to fetch per batch in Store Gateway. Default</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># value is 10000.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.series-batch-size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[series_batch_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10000]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>token_bucket_bytes_limiter</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># Token bucket bytes limiter mode. Supported values are: disabled, dryrun,</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># enabled</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.token-bucket-bytes-limiter.mode</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[mode</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;disabled&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Instance token bucket size</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.token-bucket-bytes-limiter.instance-token-bucket-size</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[instance_token_bucket_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 859832320]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># User token bucket size</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.token-bucket-bytes-limiter.user-token-bucket-size</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[user_token_bucket_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 644874240]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Request token bucket size</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CLI flag: -blocks-storage.bucket-store.token-bucket-bytes-limiter.request-token-bucket-size</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[request_token_bucket_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 4194304]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tsdb</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Local directory to store TSDBs in the ingesters.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.dir</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[dir</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;tsdb&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TSDB blocks range period.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.block-ranges-period</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[block_ranges_period</span>: <span style=color:#ae81ff>&lt;list of duration&gt; | default = 2h0m0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TSDB blocks retention in the ingester before a block is removed. This</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># should be larger than the block_ranges_period and large enough to give</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># store-gateways and queriers enough time to discover newly uploaded blocks.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.retention-period</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[retention_period</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 6h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># How frequently the TSDB blocks are scanned and new ones are shipped to the</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># storage. 0 means shipping is disabled.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.ship-interval</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[ship_interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Maximum number of tenants concurrently shipping blocks to the storage.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.ship-concurrency</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[ship_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># How frequently does Cortex try to compact TSDB head. Block is only created</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># if data covers smallest block range. Must be greater than 0 and max 30</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># minutes. Note that up to 50% jitter is added to the value for the first</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># compaction to avoid ingesters compacting concurrently.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.head-compaction-interval</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[head_compaction_interval</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Maximum number of tenants concurrently compacting TSDB head into a new</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># block</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.head-compaction-concurrency</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[head_compaction_concurrency</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 5]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If TSDB head is idle for this duration, it is compacted. Note that up to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 25% jitter is added to the value to avoid ingesters compacting</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># concurrently. 0 means disabled.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.head-compaction-idle-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[head_compaction_idle_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 1h]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The write buffer size used by the head chunks mapper. Lower values reduce</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># memory utilisation on clusters with a large number of tenants at the cost</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># of increased disk I/O operations.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.head-chunks-write-buffer-size-bytes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[head_chunks_write_buffer_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 4194304]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The number of shards of series to use in TSDB (must be a power of 2).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Reducing this will decrease memory footprint, but can negatively impact</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># performance.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.stripe-size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[stripe_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 16384]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TSDB WAL type. Supported values are: &#39;snappy&#39;, &#39;zstd&#39; and &#39;&#39; (disable</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># compression)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.wal-compression-type</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[wal_compression_type</span>: <span style=color:#ae81ff>&lt;string&gt; | default = &#34;&#34;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TSDB WAL segments files max size (bytes).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.wal-segment-size-bytes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[wal_segment_size_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 134217728]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># True to flush blocks to storage on shutdown. If false, incomplete blocks</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># will be reused after restart.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.flush-blocks-on-shutdown</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[flush_blocks_on_shutdown</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># If TSDB has not received any data for this duration, and all blocks from</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># TSDB have been shipped, TSDB is closed and deleted from local disk. If set</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># to positive value, this value should be equal or higher than</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># -querier.query-ingesters-within flag to make sure that TSDB is not closed</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># prematurely, which could cause partial query results. 0 or negative value</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># disables closing of idle TSDB.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.close-idle-tsdb-timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[close_idle_tsdb_timeout</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 0s]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The size of the in-memory queue used before flushing chunks to the disk.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.head-chunks-write-queue-size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[head_chunks_write_queue_size</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># limit the number of concurrently opening TSDB&#39;s on startup</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.max-tsdb-opening-concurrency-on-startup</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_tsdb_opening_concurrency_on_startup</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Deprecated, use maxExemplars in limits instead. If the MaxExemplars value</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># in limits is set to zero, cortex will fallback on this value. This setting</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># enables support for exemplars in TSDB and sets the maximum number that</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># will be stored. 0 or less means disabled.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.max-exemplars</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[max_exemplars</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 0]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># True to enable snapshotting of in-memory TSDB data on disk when shutting</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># down.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.memory-snapshot-on-shutdown</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[memory_snapshot_on_shutdown</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># [EXPERIMENTAL] Configures the maximum number of samples per chunk that can</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># be out-of-order.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># CLI flag: -blocks-storage.tsdb.out-of-order-cap-max</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[out_of_order_cap_max</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 32]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># [EXPERIMENTAL] If enabled, ingesters will cache expanded postings when</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># querying blocks. Caching can be configured separately for the head and</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># compacted blocks.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>expanded_postings_cache</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># If enabled, ingesters will cache expanded postings for the head block.</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Only queries with with an equal matcher for metric __name__ are cached.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>head</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Whether the postings cache is enabled or not</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.head.enabled</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Max bytes for postings cache</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.head.max-bytes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10485760]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># TTL for postings cache</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.head.ttl</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10m]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># If enabled, ingesters will cache expanded postings for the compacted</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># blocks. The cache is shared between all blocks.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>blocks</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Whether the postings cache is enabled or not</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.block.enabled</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[enabled</span>: <span style=color:#ae81ff>&lt;boolean&gt; | default = false]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Max bytes for postings cache</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.block.max-bytes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[max_bytes</span>: <span style=color:#ae81ff>&lt;int&gt; | default = 10485760]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># TTL for postings cache</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># CLI flag: -blocks-storage.expanded_postings_cache.block.ttl</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[ttl</span>: <span style=color:#ae81ff>&lt;duration&gt; | default = 10m]</span>
</span></span></code></pre></div></div></main></div></div><footer><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5"><div class="col-12 col-sm-4 pb-5 pb-sm-0"><img src=/images/cortex-stacked-white.png width=75px class="img-fluid float-left"></div><div class="col-12 col-sm-4 pb-5 pb-sm-0"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://slack.cncf.io class="text-reset text-white"><i class="fab fa-fw fa-slack"></i> Slack</a></li><li><a href=https://github.com/cortexproject/cortex class="text-reset text-white"><i class="fab fa-fw fa-github"></i> GitHub</a></li><li><a href=https://twitter.com/cortexmetrics class="text-reset text-white"><i class="fab fa-fw fa-twitter"></i> Twitter</a></li></ul></div><div class="col-12 col-sm-4"><h6 class=font-weight-bold>About</h6><p>Cortex is an OSS licensed project as Apache License 2.0</p></div></div><div class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5 text-center"><small class="col-12 text-center">© 2025 The Cortex Authors All Rights Reserved.<br>The Linux Foundation has registered trademarks and uses trademarks.
For a list of trademarks of The Linux Foundation, please see <a class="text-light alert-link" href=https://www.linuxfoundation.org/trademark-usage>Trademark Usage page</a>.</small></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>